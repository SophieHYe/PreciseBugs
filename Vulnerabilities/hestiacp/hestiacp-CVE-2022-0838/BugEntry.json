{"buggy_code": ["/**\n * jQuery.browser.mobile (http://detectmobilebrowser.com/)\n *\n * jQuery.browser.mobile will be true if the browser is a mobile device\n *\n **/\n(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);\n\n/*! jQuery JSON plugin 2.4.0 | code.google.com/p/jquery-json */\n(function(jQuery){'use strict';var escape=/[\"\\\\\\x00-\\x1f\\x7f-\\x9f]/g,meta={'\\b':'\\\\b','\\t':'\\\\t','\\n':'\\\\n','\\f':'\\\\f','\\r':'\\\\r','\"':'\\\\\"','\\\\':'\\\\\\\\'},hasOwn=Object.prototype.hasOwnProperty;jQuery.toJSON=typeof JSON==='object'&&JSON.stringify?JSON.stringify:function(o){if(o===null){return'null';}\nvar pairs,k,name,val,type=jQuery.type(o);if(type==='undefined'){return undefined;}\nif(type==='number'||type==='boolean'){return String(o);}\nif(type==='string'){return jQuery.quoteString(o);}\nif(typeof o.toJSON==='function'){return jQuery.toJSON(o.toJSON());}\nif(type==='date'){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month='0'+month;}\nif(day<10){day='0'+day;}\nif(hours<10){hours='0'+hours;}\nif(minutes<10){minutes='0'+minutes;}\nif(seconds<10){seconds='0'+seconds;}\nif(milli<100){milli='0'+milli;}\nif(milli<10){milli='0'+milli;}\nreturn'\"'+year+'-'+month+'-'+day+'T'+\nhours+':'+minutes+':'+seconds+'.'+milli+'Z\"';}\npairs=[];if(jQuery.isArray(o)){for(k=0;k<o.length;k++){pairs.push(jQuery.toJSON(o[k])||'null');}\nreturn'['+pairs.join(',')+']';}\nif(typeof o==='object'){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==='number'){name='\"'+k+'\"';}else if(type==='string'){name=jQuery.quoteString(k);}else{continue;}\ntype=typeof o[k];if(type!=='function'&&type!=='undefined'){val=jQuery.toJSON(o[k]);pairs.push(name+':'+val);}}}\nreturn'{'+pairs.join(',')+'}';}};jQuery.evalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(str){return eval('('+str+')');};jQuery.secureEvalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\\\[\"\\\\\\/bfnrtu]/g,'@').replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,']').replace(/(?:^|:|,)(?:\\s*\\[)+/g,'');if(/^[\\],:{}\\s]*jQuery/.test(filtered)){return eval('('+str+')');}\nthrow new SyntaxError('Error parsing JSON, source is not valid.');};jQuery.quoteString=function(str){if(str.match(escape)){return'\"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==='string'){return c;}\nc=a.charCodeAt();return'\\\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'\"';}\nreturn'\"'+str+'\"';};}(jQuery));\n\n\n$.fn.scrollTo = function( target, options, callback ){\n  if(typeof options == 'function' && arguments.length == 2){ callback = options; options = target; }\n  var settings = $.extend({\n    scrollTarget  : target,\n    offsetTop     : 50,\n    duration      : 10,\n    easing        : 'swing'\n  }, options);\n  return this.each(function(){\n    var scrollPane = $(this);\n    var scrollTarget = (typeof settings.scrollTarget == \"number\") ? settings.scrollTarget : $(settings.scrollTarget);\n    var scrollY = (typeof scrollTarget == \"number\") ? scrollTarget : scrollTarget.offset().top + scrollPane.scrollTop() - parseInt(settings.offsetTop);\n    scrollPane.animate({scrollTop : scrollY }, parseInt(settings.duration), settings.easing, function(){\n      if (typeof callback == 'function') { callback.call(this); }\n    });\n  });\n}\n\n/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\n\nvar dateFormat = function () {\n    var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZ]|\"[^\"]*\"|'[^']*'/g,\n        timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g,\n        timezoneClip = /[^-+\\dA-Z]/g,\n        pad = function (val, len) {\n            val = String(val);\n            len = len || 2;\n            while (val.length < len) val = \"0\" + val;\n            return val;\n        };\n\n    // Regexes and supporting functions are cached through closure\n    return function (date, mask, utc) {\n        var dF = dateFormat;\n\n        // You can't provide utc if you skip other args (use the \"UTC:\" mask prefix)\n        if (arguments.length == 1 && Object.prototype.toString.call(date) == \"[object String]\" && !/\\d/.test(date)) {\n            mask = date;\n            date = undefined;\n        }\n\n        // Passing date through Date applies Date.parse, if necessary\n        date = date ? new Date(date) : new Date;\n        if (isNaN(date)) throw SyntaxError(\"invalid date\");\n\n        mask = String(dF.masks[mask] || mask || dF.masks[\"default\"]);\n\n        // Allow setting the utc argument via the mask\n        if (mask.slice(0, 4) == \"UTC:\") {\n            mask = mask.slice(4);\n            utc = true;\n        }\n\n        var _ = utc ? \"getUTC\" : \"get\",\n            d = date[_ + \"Date\"](),\n            D = date[_ + \"Day\"](),\n            m = date[_ + \"Month\"](),\n            y = date[_ + \"FullYear\"](),\n            H = date[_ + \"Hours\"](),\n            M = date[_ + \"Minutes\"](),\n            s = date[_ + \"Seconds\"](),\n            L = date[_ + \"Milliseconds\"](),\n            o = utc ? 0 : date.getTimezoneOffset(),\n            flags = {\n                d:    d,\n                dd:   pad(d),\n                ddd:  dF.i18n.dayNames[D],\n                dddd: dF.i18n.dayNames[D + 7],\n                m:    m + 1,\n                mm:   pad(m + 1),\n                mmm:  dF.i18n.monthNames[m],\n                mmmm: dF.i18n.monthNames[m + 12],\n                yy:   String(y).slice(2),\n                yyyy: y,\n                h:    H % 12 || 12,\n                hh:   pad(H % 12 || 12),\n                H:    H,\n                HH:   pad(H),\n                M:    M,\n                MM:   pad(M),\n                s:    s,\n                ss:   pad(s),\n                l:    pad(L, 3),\n                L:    pad(L > 99 ? Math.round(L / 10) : L),\n                t:    H < 12 ? \"a\"  : \"p\",\n                tt:   H < 12 ? \"am\" : \"pm\",\n                T:    H < 12 ? \"A\"  : \"P\",\n                TT:   H < 12 ? \"AM\" : \"PM\",\n                Z:    utc ? \"UTC\" : (String(date).match(timezone) || [\"\"]).pop().replace(timezoneClip, \"\"),\n                o:    (o > 0 ? \"-\" : \"+\") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n                S:    [\"th\", \"st\", \"nd\", \"rd\"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]\n            };\n\n        return mask.replace(token, function ($0) {\n            return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);\n        });\n    };\n}();\n\n// Some common format strings\ndateFormat.masks = {\n    \"default\":      \"ddd mmm dd yyyy HH:MM:ss\",\n    shortDate:      \"m/d/yy\",\n    mediumDate:     \"mmm d, yyyy\",\n    longDate:       \"mmmm d, yyyy\",\n    fullDate:       \"dddd, mmmm d, yyyy\",\n    shortTime:      \"h:MM TT\",\n    mediumTime:     \"h:MM:ss TT\",\n    longTime:       \"h:MM:ss TT Z\",\n    isoDate:        \"yyyy-mm-dd\",\n    isoTime:        \"HH:MM:ss\",\n    isoDateTime:    \"yyyy-mm-dd'T'HH:MM:ss\",\n    isoUtcDateTime: \"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\"\n};\n\n// Internationalization strings\ndateFormat.i18n = {\n    dayNames: [\n        \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\",\n        \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"\n    ],\n    monthNames: [\n        \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\n        \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n    ]\n};\n\n// For convenience...\nDate.prototype.format = function (mask, utc) {\n    return dateFormat(this, mask, utc);\n};\n\n\n\ufeff/*\n * http://code.google.com/p/flexible-js-formatting/\n * \n * Copyright (C) 2004 Baron Schwartz <baron at sequent dot org>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nDate.parseFunctions = {count:0};\nDate.parseRegexes = [];\nDate.formatFunctions = {count:0};\n\nDate.prototype.dateFormat = function(format, ignore_offset) {\n    if (Date.formatFunctions[format] == null) {\n        Date.createNewFormat(format);\n    }\n    var func = Date.formatFunctions[format];\n    if (ignore_offset || ! this.offset) {\n      return this[func]();\n    } else {\n      return (new Date(this.valueOf() - this.offset))[func]();\n    }\n};\n\nDate.createNewFormat = function(format) {\n    var funcName = \"format\" + Date.formatFunctions.count++;\n    Date.formatFunctions[format] = funcName;\n    var code = \"Date.prototype.\" + funcName + \" = function(){return \";\n    var special = false;\n    var ch = '';\n    for (var i = 0; i < format.length; ++i) {\n        ch = format.charAt(i);\n                // escape character start\n        if (!special && ch == \"\\\\\") {\n            special = true;\n        }\n                // escaped string\n        else if (!special && ch == '\"') {\n                        var end = format.indexOf('\"', i+1);\n                        if (end==-1)\n                        {\n                                end = format.length;\n                        }\n            code += \"'\" + String.escape(format.substring(i+1, end)) + \"' + \";\n                        i = end;\n        }\n                // escaped character\n        else if (special) {\n            special = false;\n            code += \"'\" + String.escape(ch) + \"' + \";\n        }\n        else {\n            code += Date.getFormatCode(ch);\n        }\n    }\n    eval(code.substring(0, code.length - 3) + \";}\");\n};\n\nDate.getFormatCode = function(character) {\n    switch (character) {\n    case \"d\":\n        return \"String.leftPad(this.getDate(), 2, '0') + \";\n    case \"D\":\n        return \"Date.dayNames[this.getDay()].substring(0, 3) + \";\n    case \"j\":\n        return \"this.getDate() + \";\n    case \"l\":\n        return \"Date.dayNames[this.getDay()] + \";\n    case \"S\":\n        return \"this.getSuffix() + \";\n    case \"w\":\n        return \"this.getDay() + \";\n    case \"z\":\n        return \"this.getDayOfYear() + \";\n    case \"W\":\n        return \"this.getWeekOfYear() + \";\n    case \"F\":\n        return \"Date.monthNames[this.getMonth()] + \";\n    case \"m\":\n        return \"String.leftPad(this.getMonth() + 1, 2, '0') + \";\n    case \"M\":\n        return \"Date.monthNames[this.getMonth()].substring(0, 3) + \";\n    case \"n\":\n        return \"(this.getMonth() + 1) + \";\n    case \"t\":\n        return \"this.getDaysInMonth() + \";\n    case \"L\":\n        return \"(this.isLeapYear() ? 1 : 0) + \";\n    case \"Y\":\n        return \"this.getFullYear() + \";\n    case \"y\":\n        return \"('' + this.getFullYear()).substring(2, 4) + \";\n    case \"a\":\n        return \"(this.getHours() < 12 ? 'am' : 'pm') + \";\n    case \"A\":\n        return \"(this.getHours() < 12 ? 'AM' : 'PM') + \";\n    case \"g\":\n        return \"((this.getHours() %12) ? this.getHours() % 12 : 12) + \";\n    case \"G\":\n        return \"this.getHours() + \";\n    case \"h\":\n        return \"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + \";\n    case \"H\":\n        return \"String.leftPad(this.getHours(), 2, '0') + \";\n    case \"i\":\n        return \"String.leftPad(this.getMinutes(), 2, '0') + \";\n    case \"s\":\n        return \"String.leftPad(this.getSeconds(), 2, '0') + \";\n    case \"X\":\n        return \"String.leftPad(this.getMilliseconds(), 3, '0') + \";\n    case \"O\":\n        return \"this.getGMTOffset() + \";\n    case \"T\":\n        return \"this.getTimezone() + \";\n    case \"Z\":\n        return \"(this.getTimezoneOffset() * -60) + \";\n    case \"q\":   // quarter num, Q for name?\n        return \"this.getQuarter() + \";\n    default:\n        return \"'\" + String.escape(character) + \"' + \";\n    }\n};\n\nDate.parseDate = function(input, format) {\n    if (Date.parseFunctions[format] == null) {\n        Date.createParser(format);\n    }\n    var func = Date.parseFunctions[format];\n    return Date[func](input);\n};\n\nDate.createParser = function(format) {\n    var funcName = \"parse\" + Date.parseFunctions.count++;\n    var regexNum = Date.parseRegexes.length;\n    var currentGroup = 1;\n    Date.parseFunctions[format] = funcName;\n\n    var code = \"Date.\" + funcName + \" = function(input){\\n\"\n        + \"var y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, ms = -1, z = 0;\\n\"\n        + \"var d = new Date();\\n\"\n        + \"y = d.getFullYear();\\n\"\n        + \"m = d.getMonth();\\n\"\n        + \"d = d.getDate();\\n\"\n        + \"var results = input.match(Date.parseRegexes[\" + regexNum + \"]);\\n\"\n        + \"if (results && results.length > 0) {\" ;\n    var regex = \"\";\n\n    var special = false;\n    var ch = '';\n    for (var i = 0; i < format.length; ++i) {\n        ch = format.charAt(i);\n        if (!special && ch == \"\\\\\") {\n            special = true;\n        }\n        else if (special) {\n            special = false;\n            regex += String.escape(ch);\n        }\n        else {\n            obj = Date.formatCodeToRegex(ch, currentGroup);\n            currentGroup += obj.g;\n            regex += obj.s;\n            if (obj.g && obj.c) {\n                code += obj.c;\n            }\n        }\n    }\n\n    code += \"if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0 && ms >= 0)\\n\"\n        + \"{return new Date(y, m, d, h, i, s, ms).applyOffset(z);}\\n\"\n        + \"if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\\n\"\n        + \"{return new Date(y, m, d, h, i, s).applyOffset(z);}\\n\"\n        + \"else if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\\n\"\n        + \"{return new Date(y, m, d, h, i).applyOffset(z);}\\n\"\n        + \"else if (y > 0 && m >= 0 && d > 0 && h >= 0)\\n\"\n        + \"{return new Date(y, m, d, h).applyOffset(z);}\\n\"\n        + \"else if (y > 0 && m >= 0 && d > 0)\\n\"\n        + \"{return new Date(y, m, d).applyOffset(z);}\\n\"\n        + \"else if (y > 0 && m >= 0)\\n\"\n        + \"{return new Date(y, m).applyOffset(z);}\\n\"\n        + \"else if (y > 0)\\n\"\n        + \"{return new Date(y).applyOffset(z);}\\n\"\n        + \"}return null;}\";\n\n    Date.parseRegexes[regexNum] = new RegExp(\"^\" + regex + \"$\");\n    eval(code);\n};\n\nDate.formatCodeToRegex = function(character, currentGroup) {\n    switch (character) {\n    case \"D\":\n        return {g:0,\n        c:null,\n        s:\"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\"};\n    case \"j\":\n    case \"d\":\n        return {g:1,\n            c:\"d = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(\\\\d{1,2})\"};\n    case \"l\":\n        return {g:0,\n            c:null,\n            s:\"(?:\" + Date.dayNames.join(\"|\") + \")\"};\n    case \"S\":\n        return {g:0,\n            c:null,\n            s:\"(?:st|nd|rd|th)\"};\n    case \"w\":\n        return {g:0,\n            c:null,\n            s:\"\\\\d\"};\n    case \"z\":\n        return {g:0,\n            c:null,\n            s:\"(?:\\\\d{1,3})\"};\n    case \"W\":\n        return {g:0,\n            c:null,\n            s:\"(?:\\\\d{2})\"};\n    case \"F\":\n        return {g:1,\n            c:\"m = parseInt(Date.monthNumbers[results[\" + currentGroup + \"].substring(0, 3)], 10);\\n\",\n            s:\"(\" + Date.monthNames.join(\"|\") + \")\"};\n    case \"M\":\n        return {g:1,\n            c:\"m = parseInt(Date.monthNumbers[results[\" + currentGroup + \"]], 10);\\n\",\n            s:\"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\"};\n    case \"n\":\n    case \"m\":\n        return {g:1,\n            c:\"m = parseInt(results[\" + currentGroup + \"], 10) - 1;\\n\",\n            s:\"(\\\\d{1,2})\"};\n    case \"t\":\n        return {g:0,\n            c:null,\n            s:\"\\\\d{1,2}\"};\n    case \"L\":\n        return {g:0,\n            c:null,\n            s:\"(?:1|0)\"};\n    case \"Y\":\n        return {g:1,\n            c:\"y = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(\\\\d{4})\"};\n    case \"y\":\n        return {g:1,\n            c:\"var ty = parseInt(results[\" + currentGroup + \"], 10);\\n\"\n                + \"y = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\\n\",\n            s:\"(\\\\d{1,2})\"};\n    case \"a\":\n        return {g:1,\n            c:\"if (results[\" + currentGroup + \"] == 'am') {\\n\"\n                + \"if (h == 12) { h = 0; }\\n\"\n                + \"} else { if (h < 12) { h += 12; }}\",\n            s:\"(am|pm)\"};\n    case \"A\":\n        return {g:1,\n            c:\"if (results[\" + currentGroup + \"] == 'AM') {\\n\"\n                + \"if (h == 12) { h = 0; }\\n\"\n                + \"} else { if (h < 12) { h += 12; }}\",\n            s:\"(AM|PM)\"};\n    case \"g\":\n    case \"G\":\n    case \"h\":\n    case \"H\":\n        return {g:1,\n            c:\"h = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(\\\\d{1,2})\"};\n    case \"i\":\n        return {g:1,\n            c:\"i = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(\\\\d{2})\"};\n    case \"s\":\n        return {g:1,\n            c:\"s = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(\\\\d{2})\"};\n    case \"X\":\n      return {g:1,\n          c:\"ms = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n          s:\"(\\\\d{3})\"};\n    case \"O\":\n    case \"P\":\n        return {g:1,\n            c:\"z = Date.parseOffset(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(Z|[+-]\\\\d{2}:?\\\\d{2})\"}; // \"Z\", \"+05:00\", \"+0500\" all acceptable.\n    case \"T\":\n        return {g:0,\n            c:null,\n            s:\"[A-Z]{3}\"};\n    case \"Z\":\n        return {g:1,\n            c:\"s = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"([+-]\\\\d{1,5})\"};\n    default:\n        return {g:0,\n            c:null,\n            s:String.escape(character)};\n    }\n};\n\nDate.parseOffset = function(str) {\n  if (str == \"Z\") { return 0 ; } // UTC, no offset.\n  var seconds ;\n  seconds = parseInt(str[0] + str[1] + str[2]) * 3600 ; // e.g., \"+05\" or \"-08\"\n  if (str[3] == \":\") {            // \"+HH:MM\" is preferred iso8601 format (\"O\")\n    seconds += parseInt(str[4] + str[5]) * 60;\n  } else {                      // \"+HHMM\" is frequently used, though. (\"P\")\n    seconds += parseInt(str[3] + str[4]) * 60;\n  }\n  return seconds ;\n};\n\nDate.today = function() {\n    var now = new Date();\n    now.setHours(0);\n    now.setMinutes(0);\n    now.setSeconds(0);\n    \n    return now;\n}\n\n// convert the parsed date into UTC, but store the offset so we can optionally use it in dateFormat()\nDate.prototype.applyOffset = function(offset_seconds) {\n  this.offset = offset_seconds * 1000 ;\n  this.setTime(this.valueOf() + this.offset);\n  return this ;\n};\n\nDate.prototype.getTimezone = function() {\n    return this.toString().replace(\n        /^.*? ([A-Z]{3}) [0-9]{4}.*$/, \"$1\").replace(\n        /^.*?\\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\\)$/, \"$1$2$3\").replace(\n        /^.*?[0-9]{4} \\(([A-Z]{3})\\)/, \"$1\");\n};\n\nDate.prototype.getGMTOffset = function() {\n    return (this.getTimezoneOffset() > 0 ? \"-\" : \"+\")\n        + String.leftPad(Math.floor(this.getTimezoneOffset() / 60), 2, \"0\")\n        + String.leftPad(this.getTimezoneOffset() % 60, 2, \"0\");\n};\n\nDate.prototype.getDayOfYear = function() {\n    var num = 0;\n    Date.daysInMonth[1] = this.isLeapYear() ? 29 : 28;\n    for (var i = 0; i < this.getMonth(); ++i) {\n        num += Date.daysInMonth[i];\n    }\n    return num + this.getDate() - 1;\n};\n\nDate.prototype.getWeekOfYear = function() {\n    // Skip to Thursday of this week\n    var now = this.getDayOfYear() + (4 - this.getDay());\n    // Find the first Thursday of the year\n    var jan1 = new Date(this.getFullYear(), 0, 1);\n    var then = (7 - jan1.getDay() + 4);\n    document.write(then);\n    return String.leftPad(((now - then) / 7) + 1, 2, \"0\");\n};\n\nDate.prototype.isLeapYear = function() {\n    var year = this.getFullYear();\n    return ((year & 3) == 0 && (year % 100 || (year % 400 == 0 && year)));\n};\n\nDate.prototype.getFirstDayOfMonth = function() {\n    var day = (this.getDay() - (this.getDate() - 1)) % 7;\n    return (day < 0) ? (day + 7) : day;\n};\n\nDate.prototype.getLastDayOfMonth = function() {\n    var day = (this.getDay() + (Date.daysInMonth[this.getMonth()] - this.getDate())) % 7;\n    return (day < 0) ? (day + 7) : day;\n};\n\nDate.prototype.getDaysInMonth = function() {\n    Date.daysInMonth[1] = this.isLeapYear() ? 29 : 28;\n    return Date.daysInMonth[this.getMonth()];\n};\nDate.prototype.getQuarter = function() {\n    return Date.quarterFromMonthNum[this.getMonth()];\n};\n\nDate.prototype.getSuffix = function() {\n    switch (this.getDate()) {\n        case 1:\n        case 21:\n        case 31:\n            return \"st\";\n        case 2:\n        case 22:\n            return \"nd\";\n        case 3:\n        case 23:\n            return \"rd\";\n        default:\n            return \"th\";\n    }\n};\n\nString.escape = function(string) {\n    return string.replace(/('|\\\\)/g, \"\\\\$1\");\n};\n\nString.leftPad = function (val, size, ch) {\n    var result = new String(val);\n    if (ch == null) {\n        ch = \" \";\n    }\n    while (result.length < size) {\n        result = ch + result;\n    }\n    return result;\n};\n\nDate.quarterFromMonthNum = [1,1,1,2,2,2,3,3,3,4,4,4];\nDate.daysInMonth = [31,28,31,30,31,30,31,31,30,31,30,31];\nDate.monthNames =\n   [\"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\"];\nDate.dayNames =\n   [\"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\"];\nDate.y2kYear = 50;\nDate.monthNumbers = {\n    Jan:0,\n    Feb:1,\n    Mar:2,\n    Apr:3,\n    May:4,\n    Jun:5,\n    Jul:6,\n    Aug:7,\n    Sep:8,\n    Oct:9,\n    Nov:10,\n    Dec:11};\nDate.patterns = {\n    ISO8601LongPattern: \"Y\\\\-m\\\\-d\\\\TH\\\\:i\\\\:sO\",\n    ISO8601ShortPattern: \"Y\\\\-m\\\\-d\",\n    ShortDatePattern: \"n/j/Y\",\n    LongDatePattern: \"l, F d, Y\",\n    FullDateTimePattern: \"l, F d, Y g:i:s A\",\n    MonthDayPattern: \"F d\",\n    ShortTimePattern: \"g:i A\",\n    LongTimePattern: \"g:i:s A\",\n    SortableDateTimePattern: \"Y-m-d\\\\TH:i:s\",\n    UniversalSortableDateTimePattern: \"Y-m-d H:i:sO\",\n    YearMonthPattern: \"F, Y\"};\n\n\n/**\n *\n * @author: Malishev Dmitry <dima.malishev@gmail.com>\n */\nvar _DEBUG = true;\nvar _DEBUG_LEVEL = 'ALL';\n// possible levels: ALL, IMPORTANT\nvar Error = {FATAL: 1, WARNING: 0, NORMAL: -1};\n\n\n/**\n * Init debug, grabs console object if accessible, or makes dummy debugger\n */\nvar fb = _DEBUG && 'undefined' != typeof(console) ? console : {\n    log         : function(){},\n    debug       : function(){},\n    info        : function(){},\n    warn        : function(){},\n    error       : function(){},\n    assert      : function(){},\n    dir         : function(){},\n    dirxml      : function(){},\n    trace       : function(){},\n    group       : function(){},\n    groupEnd    : function(){},\n    time        : function(){},\n    timeEnd     : function(){},\n    profile     : function(){},\n    profileEnd  : function(){},\n    count       : function(){},\n    msg         : function(){}\n};\n\nvar checked = false;\nvar frmname = '';\nvar lastScrollTop = 0;\n\n\n//\nvar App = {\n    // Main namespases for page specific functions\n    // Core namespaces\n    Ajax: { \n        Busy: {} \n    },\n    Core: {},\n    // CONSTANT VALUES\n    Constants: {\n        UNLIM_VALUE: 'unlimited', // overritten in i18n.js.php\n        UNLIM_TRANSLATED_VALUE: 'unlimited' // overritten in i18n.js.php\n    }, \n    // Actions. More widly used funcs\n    Actions: {\n        DB:      {},\n        WEB:     {},\n        PACKAGE: {},\n        MAIL_ACC:{},\n        MAIL:    {}\n    },\n    // Utilities\n    Helpers: {},\n    HTML: {\n        Build: {}\n    },\n    Filters: {},\n    Env: {\n        lang: GLOBAL.lang,\n    },\n    i18n: {},\n    Listeners: {\n        DB:      {},\n        WEB:     {},\n        PACKAGE: {},\n        MAIL_ACC:{}\n    },\n    View:{\n        HTML: {\n            Build: {}\n        },\n        // pages related views\n    },\n    Cache: {\n        clear: function() {} // TODO: stub method, will be used later\n    },\n    Ref: {},\n    Tmp: {},\n    Thread: {\n        run: function(delay, ref) {\n            setTimeout(function() {\n                ref();\n            }, delay*10);\n        }\n    },\n    Settings: { \n        GLOBAL:  {}, \n        General: {}\n    },\n    Templates: {\n        Templator: null,\n        Tpl:       {},\n        _indexes:  {}\n    }\n};\n\n// Internals\nArray.prototype.set = function(key, value){\n    var index = this[0][key];\n    this[1][index] = value;\n}\nArray.prototype.get = function(key){\n    var index = this[0][key];\n    return this[1][index];\n}\nArray.prototype.finalize = function(){\n    this.shift();\n    this[0] = this[0].join('');\n    return this[0];\n}\nArray.prototype.done = function(){\n    return this.join('');\n}\n\nString.prototype.wrapperize = function(key, ns){\n    var tpl = App.Templates.get(key, ns);\n    tpl.set(':content', this);\n\n    return tpl.finalize();\n}\n\n\n\nApp.Ajax.request = function(method, data, callback, onError){\n    // this will prevent multiple ajaxes on user clicks\n    /*if (App.Helpers.isAjaxBusy(method, data)) {\n        fb.warn('ajax request ['+method+'] is busy');\n        return;\n    }*/\n    //App.Helpers.setAjaxBusy(method, data);\n    data = data || {};\n\n    var prgs = $('.progress-container');\n\n    switch (method) {\n        case 'cd':\n            prgs.find('title').text('Opening dir');\n            prgs.show();\n            break;\n        case 'delete_files':\n            prgs.find('title').text('Deleting');\n            prgs.show();\n            break;\n        case 'unpack_item':\n            prgs.find('title').text('Unpacking');\n            prgs.show();\n            break;\n        case 'create_file':\n            prgs.find('title').text('Creating file');\n            prgs.show();\n            break;\n        case 'create_dir':\n            prgs.find('title').text('Creating directory');\n            prgs.show();\n            break;\n        case 'rename_file':\n            prgs.find('title').text('Renaming file');\n            prgs.show();\n            break;\n        case 'copy_file':\n        case 'copy_directory':\n            prgs.find('title').text('Copying files');\n            prgs.show();\n            break;\n        default:\n            break;\n    }\n\n    jQuery.ajax({\n        url: GLOBAL.ajax_url,\n        global: false,\n        type: data.request_method || \"GET\",\n        data: jQuery.extend(data, {'action': method}),\n        dataType: \"text boost\",\n        converters: {\n            \"text boost\": function(value) {\n                value = value.trim();\n                return $.parseJSON(value);\n        }},\n        async: true,\n        cache: false,\n        error: function(jqXHR, textStatus, errorThrown)\n        {\n            prgs.hide();\n            onError && onError();\n            if ('undefined' != typeof onError) {\n                fb.error(textStatus);\n            }\n        },\n        complete: function()\n        {\n            //App.Helpers.setAjaxFree(method, data);\n            prgs.hide();\n        },\n        success: function(reply)\n        {\n            prgs.hide();\n            //App.Helpers.setAjaxFree(method, data);\n            try {\n                callback && callback(reply);\n            }\n            catch(e) {\n                fb.error('GENERAL ERROR with ajax method: ' + data.request_method + ' ' + e);\n                //App.Helpers.generalError();\n            }\n        }\n    });\n}\n\njQuery.extend({\n    keys:    function(obj){\n        if (!obj) {\n            return [];\n        }\n        var a = [];\n        jQuery.each(obj, function(k){ a.push(k) });\n        return a;\n    }\n})\n\n\nApp.Core.create_hidden_form = function(action){\n    var form = jQuery('<form>', {\n            id     : 'hidden-form',\n            method : 'post',\n            action : action\n        });\n    jQuery('body').append(form);\n\n    return form;\n};\n\nApp.Core.extend_from_json = function(elm, data, prefix){\n    elm      = jQuery(elm);\n    var data = App.Core.flatten_json(data, prefix);\n    var keys = jQuery.keys(data);\n    for(var i=0, cnt=keys.length; i<cnt; i++)\n    {\n        elm.append(jQuery('<input>', {\n            name : keys[i],\n            value: data[keys[i]],\n            type : 'hidden'\n        }));\n    }\n\n    return elm;\n}\n\nApp.Core.flatten_json = function(data, prefix){\n    var keys   = jQuery.keys(data);\n    var result = {};\n\n    prefix || (prefix = '');\n\n    if(keys.length)\n    {\n        for(var i=0, cnt=keys.length; i<cnt; i++)\n        {\n            var value = data[keys[i]];\n            switch(typeof(value))\n            {\n                case 'function': break;\n                case 'object'  : result = jQuery.extend(result, App.Core.flatten_json(value, prefix + '[' + keys[i] + ']')); break;\n                default        : result[prefix + '[' + keys[i] + ']'] = value;\n            }\n        }\n        return result;\n    }\n    else\n    {\n        return false;\n    }\n}\n\n//\n// Cookies adapter\n// Allow to work old pages realisations of cookie requests\n//\nfunction createCookie(name, value, expire_days) {\n    jQuery.cookie(name, value, { expires: expire_days});\n}\n\nfunction readCookie(name) {\n    jQuery.cookie(name);\n}\n\nfunction eraseCookie(name) {\n    jQuery.removeCookie(name);\n}\n\n\n/**\n * Timer for profiling\n */\nvar timer = {};\ntimer.start = function()\n{\n    timer.start_time = new Date();\n}\n\ntimer.stop = function( msg )\n{\n    timer.stop_time = new Date();\n    timer.print( msg );\n}\n\ntimer.print = function( msg )\n{\n    var passed = timer.stop_time - timer.start_time;\n    fb.info( msg || '' + passed / 1000 );\n}\n\n\nString.prototype.trim = function()\n{\n    var str = this;\n    str = str.replace(/^\\s+/, '');\n    for (var i = str.length - 1; i >= 0; i--) {\n        if (/\\S/.test(str.charAt(i))) {\n            str = str.substring(0, i + 1);\n        break;\n        }\n    }\n    return str;\n}\n\nhover_menu = function() {\n    var sep_1 = $('div.l-content > div.l-separator:nth-of-type(2)');\n    var sep_2 = $('div.l-content > div.l-separator:nth-of-type(4)');\n    var nav_main = $('.l-stat');\n    var nav_a = $('.l-stat .l-stat__col a');\n    var nav_context = $('.l-sort');\n\n    var st = $(window).scrollTop();\n\n    if (st <= 112) {\n        sep_1.css({'margin-top': 180 - st + 'px'});\n        sep_2.css({'margin-top': 225 - st + 'px'});\n        nav_a.css({'height': 111 - st + 'px'});\n        nav_a.css({'min-height': 111 - st + 'px'});\n        nav_context.css({'margin-top': 181 - st + 'px'});\n        sep_2.css({'box-shadow':'none'});\n        sep_2.css({'height': '1px'});\n    }\n\n    if(st > 112){\n        sep_1.css({'margin-top': '100px'});\n        sep_2.css({'margin-top': '130px'});\n        sep_2.css({'height': '15px'});\n        nav_a.css({'height': '0'});\n        nav_a.css({'min-height': '0'});\n        nav_context.css({'margin-top': '101px'});\n        nav_a.find('ul').css({'visibility': 'hidden'});\n        nav_main.css({'padding-top': '27px'});\n        sep_2.css({'box-shadow':'0 5px 6px 0 rgba(200, 200, 200, 0.35)'});\n    }\n\n    if(st == 0){\n        nav_a.css({'min-height': '70px'});\n        nav_a.css({'height': '70px'});\n    }\n\n    if(st < 109 ){\n        nav_a.find('ul').css({'visibility': 'visible'});\n        nav_main.css({'padding-top': 36 + 'px'});\n    }\n\n    if (st <= 112 && st > 110 ) {\n        nav_main.css({'padding-top': 36 - st + 109  + 'px'});\n    }\n\n    lastScrollTop = st;\n}\n\n\nfunction checkedAll(frmname) {\n    if($('input#toggle-all').prop('checked')){\n        $('.l-unit:not(.header)').addClass(\"selected\");\n        $('.ch-toggle').prop(\"checked\", true);\n        $('.toggle-all').addClass('clicked-on');\n    } else {\n        $('.l-unit:not(.header)').removeClass(\"selected\");\n        $('.ch-toggle').prop(\"checked\", false);\n        $('.toggle-all').removeClass('clicked-on');\n    }\n}\n\nfunction doSearch(url) {\n    var url = url || '/search/';\n    var loc = url + '?q=' + $('.search-input').val() + '&token=' +  $('input[name=\"token\"]').val();\n    location.href = loc;\n    return false;\n}\n\n\nfunction elementHideShow(elementToHideOrShow,trigger){\n    var el = document.getElementById(elementToHideOrShow);\n    el.style.display = el.style.display === 'none' ? 'block' : 'none';\n    \n    if (typeof trigger !== 'undefined') {\n        trigger.querySelector('.section-hide-button').classList.toggle('fa-minus-square');\n        trigger.querySelector('.section-hide-button').classList.toggle('fa-plus-square');\n    }\n}\n", "//\n//\n// Updates database username dynamically, showing its prefix\nApp.Actions.DB.update_db_username_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').html('');\n    } \n    $(elm).parent().find('.hint').text(GLOBAL.DB_USER_PREFIX + hint);\n}\n\n//\n//\n// Updates database name dynamically, showing its prefix\nApp.Actions.DB.update_db_databasename_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').html('');\n    } \n    $(elm).parent().find('.hint').text(GLOBAL.DB_DBNAME_PREFIX + hint);\n}\n\n//\n// listener that triggers database user hint updating\nApp.Listeners.DB.keypress_db_username = function() {\n    var ref = $('input[name=\"v_dbuser\"]');\n    var current_val = ref.val();\n    if (current_val.trim() != '') {\n        App.Actions.DB.update_db_username_hint(ref, current_val);\n    }\n    \n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_db_username_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\n//\n// listener that triggers database name hint updating\nApp.Listeners.DB.keypress_db_databasename = function() {\n    var ref = $('input[name=\"v_database\"]');\n    var current_val = ref.val();\n    if (current_val.trim() != '') {\n        App.Actions.DB.update_db_databasename_hint(ref, current_val);\n    }\n    \n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_dbn_tmt);\n        window.frp_dbn_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_db_databasename_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\nApp.Actions.DB.update_v_password = function (){\n    var password = $('input[name=\"v_password\"]').val();\n    var min_small = new RegExp(/^(?=.*[a-z]).+$/);\n    var min_cap = new RegExp(/^(?=.*[A-Z]).+$/);\n    var min_num = new RegExp(/^(?=.*\\d).+$/); \n    var min_length = 8;\n    var score = 0;\n    \n    if(password.length >= min_length) { score = score + 1; }\n    if(min_small.test(password)) { score = score + 1;}\n    if(min_cap.test(password)) { score = score + 1;}\n    if(min_num.test(password)) { score = score+ 1; }\n    $('#meter').val(score);   \n}\n\nApp.Listeners.DB.keypress_v_password = function() {\n    var ref = $('input[name=\"v_password\"]');\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_v_password(elm, $(elm).val());\n        }, 100);\n    });\n}\n\nApp.Listeners.DB.keypress_v_password();\n\n//\n// Page entry point\n// Trigger listeners\nApp.Listeners.DB.keypress_db_username();\nApp.Listeners.DB.keypress_db_databasename();\n\nrandomString = function(min_length = 16) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = min_length;\n    var randomstring = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        randomstring += chars.substr(rnum, 1);\n    }\n    var regex = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\\d)[a-zA-Z\\d]{8,}$/);\n    if(!regex.test(randomstring)){\n        randomString();\n    }else{\n        $('input[name=v_password]').val(randomstring);\n        App.Actions.DB.update_v_password();\n    }    \n}\n", "//\n//\n// Updates database dns record dynamically, showing its full domain path\nApp.Actions.DB.update_dns_record_hint = function(elm, hint) {\n    // clean hint\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').html('');\n    }\n\n    // set domain name without rec in case of @ entries\n    if (hint == '@') {\n        hint = '';\n    }\n\n    // dont show pregix if domain name = rec value\n    if (hint == GLOBAL.DNS_REC_PREFIX + '.') {\n        hint = '';\n    }\n\n    // add dot at the end if needed\n    if (hint != '' && hint.slice(-1) != '.') {\n        hint += '.';\n    }\n\n    $(elm).parent().find('.hint').text(hint + GLOBAL.DNS_REC_PREFIX);\n}\n\n//\n// listener that triggers dns record name hint updating\nApp.Listeners.DB.keypress_dns_rec_entry = function() {\n    var ref = $('input[name=\"v_rec\"]');\n    var current_rec = ref.val();\n    if (current_rec.trim() != '') {\n        App.Actions.DB.update_dns_record_hint(ref, current_rec);\n    }\n\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_dns_record_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\n//\n// Page entry point\n// Trigger listeners\nApp.Listeners.DB.keypress_dns_rec_entry();\n", "App.Actions.MAIL_ACC.enable_unlimited = function(elm, source_elm) {\n    $(elm).data('checked', true);\n    $(elm).data('prev_value', $(elm).val()); // save prev value in order to restore if needed\n    $(elm).val(App.Constants.UNLIM_TRANSLATED_VALUE);\n    $(elm).attr('disabled', true);\n    $(source_elm).css('opacity', '1');\n}\n\nApp.Actions.MAIL_ACC.disable_unlimited = function(elm, source_elm) {\n    $(elm).data('checked', false);\n    if ($(elm).data('prev_value') && $(elm).data('prev_value').trim() != '') {\n        var prev_value = $(elm).data('prev_value').trim();\n        $(elm).val(prev_value);\n        if (App.Helpers.isUnlimitedValue(prev_value)) {\n            $(elm).val('0');\n        }\n    }\n    else {\n        if (App.Helpers.isUnlimitedValue($(elm).val())) {\n            $(elm).val('0');\n        }\n    }\n    $(elm).attr('disabled', false);\n    $(source_elm).css('opacity', '0.5');\n}\n\nApp.Actions.MAIL_ACC.toggle_unlimited_feature = function(evt) {\n    var elm = $(evt.target);\n    var ref = elm.prev('.vst-input');\n    if (!$(ref).data('checked')) {\n        App.Actions.MAIL_ACC.enable_unlimited(ref, elm);\n    }\n    else {\n        App.Actions.MAIL_ACC.disable_unlimited(ref, elm);\n    }\n}\n\nApp.Listeners.MAIL_ACC.checkbox_unlimited_feature = function() {\n    $('.unlim-trigger').on('click', App.Actions.MAIL_ACC.toggle_unlimited_feature);\n}\n\nApp.Listeners.MAIL_ACC.init = function() {\n    $('.unlim-trigger').each(function(i, elm) {\n        var ref = $(elm).prev('.vst-input');\n        if (App.Helpers.isUnlimitedValue($(ref).val())) {\n            App.Actions.MAIL_ACC.enable_unlimited(ref, elm);\n        }\n        else {\n            $(ref).data('prev_value', $(ref).val());\n            App.Actions.MAIL_ACC.disable_unlimited(ref, elm);\n        }\n    });\n}\n\nApp.Helpers.isUnlimitedValue = function(value) {\n    var value = value.trim();\n    if (value == App.Constants.UNLIM_VALUE || value == App.Constants.UNLIM_TRANSLATED_VALUE) {\n        return true;\n    }\n\n    return false;\n}\n\n//\n// Page entry point\n// Trigger listeners\nApp.Listeners.MAIL_ACC.init();\nApp.Listeners.MAIL_ACC.checkbox_unlimited_feature();\n$('#v_blackhole').on('click', function(evt){\n    if($('#v_blackhole').is(':checked')){\n       $('#v_fwd').prop('disabled', true);\n       $('#v_fwd_for').prop('checked', true);\n       $('#id_fwd_for').hide();\n    }else{\n       $('#v_fwd').prop('disabled', false);\n       $('#id_fwd_for').show();        \n    }\n});\n$('form[name=\"v_quota\"]').on('submit', function(evt) {\n    $('input:disabled').each(function(i, elm) {\n        $(elm).attr('disabled', false);\n        if (App.Helpers.isUnlimitedValue($(elm).val())) {\n            $(elm).val(App.Constants.UNLIM_VALUE);\n        }\n    });\n});\n\nApp.Actions.MAIL_ACC.update_v_password = function (){\n    var password = $('input[name=\"v_password\"]').val();\n    var min_small = new RegExp(/^(?=.*[a-z]).+$/);\n    var min_cap = new RegExp(/^(?=.*[A-Z]).+$/);\n    var min_num = new RegExp(/^(?=.*\\d).+$/); \n    var min_length = 8;\n    var score = 0;\n    \n    if(password.length >= min_length) { score = score + 1; }\n    if(min_small.test(password)) { score = score + 1;}\n    if(min_cap.test(password)) { score = score + 1;}\n    if(min_num.test(password)) { score = score+ 1; }\n    $('#meter').val(score);   \n}\n\nApp.Listeners.MAIL_ACC.keypress_v_password = function() {\n    var ref = $('input[name=\"v_password\"]');\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.MAIL_ACC.update_v_password(elm, $(elm).val());\n        }, 100);\n    });\n}\n\nApp.Listeners.MAIL_ACC.keypress_v_password();\n\n\nrandomString = function(min_length = 16) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = min_length;\n    var randomstring = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        randomstring += chars.substr(rnum, 1);\n    }\n    var regex = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\\d)[a-zA-Z\\d]{8,}$/);\n    if(!regex.test(randomstring)){\n        randomString();\n    }else{\n        $('input[name=v_password]').val(randomstring);\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text(randomstring);\n        else\n            $('#v_password').text(Array(randomstring.length+1).join('*'));\n        \n        App.Actions.MAIL_ACC.update_v_password();\n        generate_mail_credentials();\n    }    \n}\n\ngenerate_mail_credentials = function() {\n    var div = $('.mail-infoblock').clone();\n    div.find('#mail_configuration').remove();\n    var pass=div.find('#v_password').text();\n    if (pass==\"\") div.find('#v_password').html(' ');\n    var output = div.text();\n    output=output.replace(/(?:\\r\\n|\\r|\\n|\\t)/g, \"|\");\n    output=output.replace(/  /g, \"\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/^\\|+/g, \"\");\n    output=output.replace(/\\|$/, \"\");\n    output=output.replace(/ $/, \"\");\n    output=output.replace(/:\\|/g, \": \");\n    output=output.replace(/\\|/g, \"\\n\");\n    //console.log(output);\n    $('#v_credentials').val(output);\n}\n\n$(document).ready(function() {\n    $('#v_account').text($('input[name=v_account]').val());\n    $('#v_password').text($('input[name=v_password]').val());\n    generate_mail_credentials();\n\n    $('input[name=v_account]').change(function(){\n        $('#v_account').text($(this).val());\n        generate_mail_credentials();\n    });\n\n    $('input[name=v_password]').change(function(){\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text($(this).val());\n        else\n            $('#v_password').text(Array($(this).val().length+1).join('*'));\n        generate_mail_credentials();\n    });\n\n    $('.toggle-psw-visibility-icon').click(function(){\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text($('input[name=v_password]').val());\n        else\n            $('#v_password').text(Array($('input[name=v_password]').val().length+1).join('*'));\n        generate_mail_credentials();\n    });\n\n    $('#mail_configuration').change(function(evt){\n        var opt = $(evt.target).find('option:selected');\n\n        switch(opt.attr('v_type')){\n            case 'hostname':\n                $('#td_imap_hostname').html(opt.attr('domain'));\n                $('#td_smtp_hostname').html(opt.attr('domain'));\n                break;\n            case 'starttls':\n                $('#td_imap_port').html('143');\n                $('#td_imap_encryption').html('STARTTLS');\n                $('#td_smtp_port').html('587');\n                $('#td_smtp_encryption').html('STARTTLS');\n                break;\n            case 'ssl':\n                $('#td_imap_port').html('993');\n                $('#td_imap_encryption').html('SSL / TLS');\n                $('#td_smtp_port').html('465');\n                $('#td_smtp_encryption').html('SSL / TLS');\n                break;\n            case 'no_encryption':\n                $('#td_imap_hostname').html(opt.attr('domain'));\n                $('#td_smtp_hostname').html(opt.attr('domain'));\n\n                $('#td_imap_port').html('143');\n                $('#td_imap_encryption').html(opt.attr('no_encryption'));\n                $('#td_smtp_port').html('25');\n                $('#td_smtp_encryption').html(opt.attr('no_encryption'));\n                break;\n        }\n        generate_mail_credentials();\n    });\n});\n", " App.Actions.WEB.update_custom_doc_root = function(elm, hint) {\n    var prepath = $('input[name=\"v-custom-doc-root_prepath\"]').val();\n    var domain = $('select[name=\"v-custom-doc-domain\"]').val();\n    var folder = $('input[name=\"v-custom-doc-folder\"]').val();\n    console.log(domain, folder);\n    $('.custom_docroot_hint').html(prepath+domain+'/public_html/'+folder);\n}\nApp.Listeners.DB.keypress_custom_folder = function() {\n    var ref = $('input[name=\"v-custom-doc-folder\"]');\n    var current_rec = ref.val();\n    App.Actions.WEB.update_custom_doc_root(ref, current_rec);\n    \n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.WEB.update_custom_doc_root(elm, $(elm).val());\n        });\n    });\n}\n\nApp.Listeners.DB.change_custom_doc = function() {\n    var ref = $('select[name=\"v-custom-doc-domain\"]');\n    var current_rec = ref.val();\n    ref.bind('change select', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.WEB.update_custom_doc_root(elm, $(elm).val());\n            var domain = $('.ftp-path-prefix').text(GLOBAL.FTP_USER_PREPATH + '/' + $(evt.target));\n\n        });\n    });\n}\n\n// Page entry point\n// Trigger listeners\nApp.Listeners.DB.keypress_custom_folder();\nApp.Listeners.DB.change_custom_doc();\n\nApp.Actions.WEB.update_ftp_username_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').html('');\n    }\n    \n    hint = hint.replace(/[^\\w\\d]/gi, '');\n\n    $(elm).parent().find('.v-ftp-user').val(hint);\n    $(elm).parent().find('.hint').text(GLOBAL.FTP_USER_PREFIX + hint);\n}\n\nApp.Listeners.WEB.keypress_ftp_username = function() {\n    var ftp_user_inputs = $('.v-ftp-user');\n    $.each(ftp_user_inputs, function(i, ref) {\n        var ref = $(ref);\n        var current_val = ref.val();\n        if (current_val.trim() != '') {\n            App.Actions.WEB.update_ftp_username_hint(ref, current_val);\n        }\n        \n        ref.bind('keypress input', function(evt) {\n            clearTimeout(window.frp_usr_tmt);\n            window.frp_usr_tmt = setTimeout(function() {\n                var elm = $(evt.target);\n                App.Actions.WEB.update_ftp_username_hint(elm, $(elm).val());\n            }, 100);\n        });\n    });\n}\n\nApp.Listeners.WEB.keypress_domain_name = function() {\n    $('#v_domain').bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            //var elm = $(evt.target);\n            //App.Actions.WEB.update_ftp_username_hint(elm, $(elm).val());\n            var domain = $('.ftp-path-prefix').text(GLOBAL.FTP_USER_PREPATH + '/' + $('#v_domain').val());\n            $('#v-custom-doc-domain-main').text($('#v_domain').val());\n            $('#v-custom-doc-domain-main').val($('#v_domain').val());\n            App.Actions.WEB.update_custom_doc_root(13, 12);\n            \n        }, 100);\n    });\n}\n\n//\n//\n\nApp.Actions.WEB.update_ftp_path_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.v-ftp-path-hint').html('');\n    }\n\n    if (hint[0] != '/') {\n        hint = '/' + hint;\n    }\n    hint = hint.replace(/\\/(\\/+)/g, '/');\n\n    $(elm).parent().find('.v-ftp-path-hint').text(hint);\n}\n\nApp.Listeners.WEB.keypress_ftp_path = function() {\n    var ftp_path_inputs = $('.v-ftp-path');\n    $.each(ftp_path_inputs, function(i, ref) {\n        var ref = $(ref);\n        var current_val = ref.val();\n        if (current_val.trim() != '') {\n            App.Actions.WEB.update_ftp_path_hint(ref, current_val);\n        }\n        \n        ref.bind('keypress input', function(evt) {\n            clearTimeout(window.frp_usr_tmt);\n            window.frp_usr_tmt = setTimeout(function() {\n                var elm = $(evt.target);\n                App.Actions.WEB.update_ftp_path_hint(elm, $(elm).val());\n            }, 100);\n        });\n    });\n}\n\n//\n//\nApp.Actions.WEB.add_ftp_user_form = function() {\n    var ref = $('#templates').find('.ftptable-nrm').clone(true);\n    var index = $('.data-col2 .ftptable').length + 1;\n    \n    ref.find('input').each(function(i, elm) {\n        var attr_value = $(elm).prop('name').replace('%INDEX%', index);\n        $(elm).prop('name', attr_value);\n    });\n    \n    ref.find('.ftp-user-number').text(index);\n    \n    $('#ftp_users').append(ref);\n    \n    var index = 1;\n    $('.data-col2 .ftp-user-number:visible').each(function(i, o) {\n        $(o).text(index);\n        index += 1;\n    });\n}\n\nApp.Actions.WEB.remove_ftp_user = function(elm) {\n    var ref = $(elm).parents('.ftptable');\n    ref.remove();\n\n    var index = 1;\n    $('.data-col2 .ftp-user-number:visible').each(function(i, o) {\n        $(o).text(index);\n        index += 1;\n    });\n\n    if ($('.ftptable-nrm:visible').length == 0) {\n        $('.v-add-new-user').hide();\n        $('input[name=\"v_ftp\"]').attr('checked', false);\n    }\n}\n\n\nApp.Actions.WEB.toggle_additional_ftp_accounts = function(elm) {\n    if ($(elm).prop('checked')) {\n        $('.ftptable-nrm, .v-add-new-user, .add-new-ftp-user-button').show();\n        $('.ftptable-nrm').each(function(i, elm) {\n            var login = $(elm).find('.v-ftp-user');\n            if (login.val().trim() != '') {\n                $(elm).find('.v-ftp-user-deleted').val(0);\n            }\n        });\n    }\n    else {\n        $('.ftptable-nrm, .v-add-new-user, .add-new-ftp-user-button').hide();\n        $('.ftptable-nrm').each(function(i, elm) {\n            var login = $(elm).find('.v-ftp-user');\n            if (login.val().trim() != '') {\n                $(elm).find('.v-ftp-user-deleted').val(1);\n            }\n        });\n    }\n    \n    if ($('.ftptable-nrm:visible').length == 0) {\n        var ref = $('#templates').find('.ftptable').clone(true);\n        var index = $('.data-col2 .ftptable').length + 1;\n        \n        ref.find('input').each(function(i, elm) {\n            var attr_value = $(elm).prop('name').replace('%INDEX%', index);\n            $(elm).prop('name', attr_value);\n        });\n        \n        ref.find('.ftp-user-number').text(index);\n        \n        $('.v-add-new-user').parent('tr').prev().find('td').html(ref);\n    }\n}\n\nApp.Actions.WEB.toggle_letsencrypt = function(elm) {\n    if ($(elm).prop('checked')) {\n        $('#ssltable textarea[name=v_ssl_crt],#ssltable textarea[name=v_ssl_key], #ssltable textarea[name=v_ssl_ca]').attr('disabled', 'disabled');\n        $('#generate-csr').hide();\n\t$('.lets-encrypt-note').show();\n    }\n    else {\n        $('#ssltable textarea[name=v_ssl_crt],#ssltable textarea[name=v_ssl_key], #ssltable textarea[name=v_ssl_ca]').removeAttr('disabled');\n        $('#generate-csr').show();\n\t$('.lets-encrypt-note').hide();\n    }\n}\n\n//\n// Page entry point\nApp.Listeners.WEB.keypress_ftp_username();\nApp.Listeners.WEB.keypress_ftp_path();\nApp.Listeners.WEB.keypress_domain_name();\n\n\n$(function() {\n    $('#v_domain').change(function() {\n        var prefix = 'www.';\n        if (((document.getElementById('v_domain').value).split(\".\")).length > 2) {\n            document.getElementById('v_aliases').value = \"\";\n        } else {\n            document.getElementById('v_aliases').value = prefix + document.getElementById('v_domain').value;\n        }\n    });\n    App.Actions.WEB.toggle_letsencrypt($('input[name=v_letsencrypt]'))\n\n    $('select[name=\"v_stats\"]').change(function(evt){\n        var select = $(evt.target);\n    \n        if(select.val() == 'none'){\n            $('.stats-auth').hide();\n        } else {\n            $('.stats-auth').show();\n        }\n    });\n});\n\n\n\nfunction WEBrandom() {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = 16;\n    var webrandom = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        webrandom += chars.substr(rnum, 1);\n    }\n        document.v_add_web.v_stats_password.value = webrandom;\n}\n\nfunction FTPrandom(elm) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = 16;\n    var ftprandomstring = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        ftprandomstring += chars.substr(rnum, 1);\n    }\n    $(elm).parents('.ftptable').find('.v-ftp-user-psw').val(ftprandomstring);\n}\n\n$('#vstobjects').on('submit', function(evt) {\n    $('input[disabled]').each(function(i, elm) {\n        $(elm).removeAttr('disabled');\n    });\n});\n", "//\n//\n// Updates database username dynamically, showing its prefix\nApp.Actions.DB.update_db_username_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').html('');\n    } \n    $(elm).parent().find('.hint').text(GLOBAL.DB_USER_PREFIX + hint);\n}\n\n//\n//\n// Updates database name dynamically, showing its prefix\nApp.Actions.DB.update_db_databasename_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').html('');\n    } \n    $(elm).parent().find('.hint').text(GLOBAL.DB_DBNAME_PREFIX + hint);\n}\n\n//\n// listener that triggers database user hint updating\nApp.Listeners.DB.keypress_db_username = function() {\n    var ref = $('input[name=\"v_dbuser\"]');\n    var current_val = ref.val();\n    if (current_val.trim() != '') {\n        App.Actions.DB.update_db_username_hint(ref, current_val);\n    }    \n    \n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_db_username_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\n//\n// listener that triggers database name hint updating\nApp.Listeners.DB.keypress_db_databasename = function() {\n    var ref = $('input[name=\"v_database\"]');\n    var current_val = ref.val();\n    if (current_val.indexOf(GLOBAL.DB_DBNAME_PREFIX) == 0) {\n        current_val = current_val.slice(GLOBAL.DB_DBNAME_PREFIX.length, current_val.length);\n        ref.val(current_val);\n    }\n    if (current_val.trim() != '') {\n        App.Actions.DB.update_db_username_hint(ref, current_val);\n    }   \n    \n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_dbn_tmt);\n        window.frp_dbn_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_db_databasename_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\nApp.Actions.DB.update_v_password = function (){\n    var password = $('input[name=\"v_password\"]').val();\n    var min_small = new RegExp(/^(?=.*[a-z]).+$/);\n    var min_cap = new RegExp(/^(?=.*[A-Z]).+$/);\n    var min_num = new RegExp(/^(?=.*\\d).+$/); \n    var min_length = 8;\n    var score = 0;\n    \n    if(password.length >= min_length) { score = score + 1; }\n    if(min_small.test(password)) { score = score + 1;}\n    if(min_cap.test(password)) { score = score + 1;}\n    if(min_num.test(password)) { score = score+ 1; }\n    $('#meter').val(score);   \n}\n\nApp.Listeners.DB.keypress_v_password = function() {\n    var ref = $('input[name=\"v_password\"]');\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_v_password(elm, $(elm).val());\n        }, 100);\n    });\n}\n\nApp.Listeners.DB.keypress_v_password();\n\n//\n// Page entry point\n// Trigger listeners\nApp.Listeners.DB.keypress_db_username();\nApp.Listeners.DB.keypress_db_databasename();\n\n\nrandomString = function(min_length = 16) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = min_length;\n    var randomstring = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        randomstring += chars.substr(rnum, 1);\n    }\n    var regex = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\\d)[a-zA-Z\\d]{8,}$/);\n    if(!regex.test(randomstring)){\n        randomString();\n    }else{\n        $('input[name=v_password]').val(randomstring);\n        App.Actions.DB.update_v_password();\n    }    \n}\n\n     ", "//\n//\n// Updates database dns record dynamically, showing its full domain path\nApp.Actions.DB.update_dns_record_hint = function(elm, hint) {\n    // clean hint\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').html('');\n    }\n\n    // set domain name without rec in case of @ entries\n    if (hint == '@') {\n        hint = '';\n    }\n\n    // dont show pregix if domain name = rec value\n    if (hint == GLOBAL.DNS_REC_PREFIX + '.') {\n        hint = '';\n    }\n\n    // add dot at the end if needed\n    if (hint != '' && hint.slice(-1) != '.') {\n        hint += '.';\n    }\n\n    $(elm).parent().find('.hint').text(hint + GLOBAL.DNS_REC_PREFIX);\n}\n\n//\n// listener that triggers dns record name hint updating\nApp.Listeners.DB.keypress_dns_rec_entry = function() {\n    var ref = $('input[name=\"v_rec\"]');\n    var current_rec = ref.val();\n    if (current_rec.trim() != '') {\n        App.Actions.DB.update_dns_record_hint(ref, current_rec);\n    }\n\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_dns_record_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\n//\n// Page entry point\n// Trigger listeners\nApp.Listeners.DB.keypress_dns_rec_entry();\n", "App.Actions.MAIL_ACC.enable_unlimited = function(elm, source_elm) {\n    $(elm).data('checked', true);\n    $(elm).data('prev_value', $(elm).val()); // save prev value in order to restore if needed\n    $(elm).val(App.Constants.UNLIM_TRANSLATED_VALUE);\n    $(elm).attr('disabled', true);\n    $(source_elm).css('opacity', '1');\n}\n\nApp.Actions.MAIL_ACC.disable_unlimited = function(elm, source_elm) {\n    $(elm).data('checked', false);\n    if ($(elm).data('prev_value') && $(elm).data('prev_value').trim() != '') {\n        var prev_value = $(elm).data('prev_value').trim();\n        $(elm).val(prev_value);\n        if (App.Helpers.isUnlimitedValue(prev_value)) {\n            $(elm).val('0');\n        }\n    }\n    else {\n        if (App.Helpers.isUnlimitedValue($(elm).val())) {\n            $(elm).val('0');\n        }\n    }\n    $(elm).attr('disabled', false);\n    $(source_elm).css('opacity', '0.5');\n}\n\n// \nApp.Actions.MAIL_ACC.toggle_unlimited_feature = function(evt) {\n    var elm = $(evt.target);\n    var ref = elm.prev('.vst-input');\n    if (!$(ref).data('checked')) {\n        App.Actions.MAIL_ACC.enable_unlimited(ref, elm);\n    }\n    else {\n        App.Actions.MAIL_ACC.disable_unlimited(ref, elm);\n    }\n}\n\nApp.Listeners.MAIL_ACC.checkbox_unlimited_feature = function() {\n    $('.unlim-trigger').on('click', App.Actions.MAIL_ACC.toggle_unlimited_feature);\n}\n\nApp.Listeners.MAIL_ACC.init = function() {\n    $('.unlim-trigger').each(function(i, elm) {\n        var ref = $(elm).prev('.vst-input');\n        if (App.Helpers.isUnlimitedValue($(ref).val())) {\n            App.Actions.MAIL_ACC.enable_unlimited(ref, elm);\n        }\n        else {\n            $(ref).data('prev_value', $(ref).val());\n            App.Actions.MAIL_ACC.disable_unlimited(ref, elm);\n        }\n    });\n}\n\nApp.Actions.MAIL_ACC.update_v_password = function (){\n    var password = $('input[name=\"v_password\"]').val();\n    var min_small = new RegExp(/^(?=.*[a-z]).+$/);\n    var min_cap = new RegExp(/^(?=.*[A-Z]).+$/);\n    var min_num = new RegExp(/^(?=.*\\d).+$/); \n    var min_length = 8;\n    var score = 0;\n    \n    if(password.length >= min_length) { score = score + 1; }\n    if(min_small.test(password)) { score = score + 1;}\n    if(min_cap.test(password)) { score = score + 1;}\n    if(min_num.test(password)) { score = score+ 1; }\n    $('#meter').val(score);   \n}\n\nApp.Listeners.MAIL_ACC.keypress_v_password = function() {\n    var ref = $('input[name=\"v_password\"]');\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.MAIL_ACC.update_v_password(elm, $(elm).val());\n        }, 100);\n    });\n}\n\n$('#v_blackhole').on('click', function(evt){\n       if($('#v_blackhole').is(':checked')){\n           $('#v_fwd').prop('disabled', true);\n           $('#v_fwd_for').prop('checked', true);\n           $('#id_fwd_for').hide();\n       }else{\n           $('#v_fwd').prop('disabled', false);\n           $('#id_fwd_for').show();       \n       }\n    });\n\nApp.Listeners.MAIL_ACC.keypress_v_password();\n\n\nrandomString = function(min_length = 16) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = min_length;\n    var randomstring = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        randomstring += chars.substr(rnum, 1);\n    }\n    var regex = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\\d)[a-zA-Z\\d]{8,}$/);\n    if(!regex.test(randomstring)){\n        randomString();\n    }else{\n        $('input[name=v_password]').val(randomstring);\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text(randomstring);\n        else\n            $('#v_password').text(Array(randomstring.length+1).join('*'));\n        \n        App.Actions.MAIL_ACC.update_v_password();\n        generate_mail_credentials();\n    }    \n}\ngenerate_mail_credentials = function() {\n    var div = $('.mail-infoblock').clone();\n    div.find('#mail_configuration').remove();\n    var pass=div.find('#v_password').text();\n    if (pass==\"\") div.find('#v_password').html(' ');\n    var output = div.text();\n    output=output.replace(/(?:\\r\\n|\\r|\\n|\\t)/g, \"|\");\n    output=output.replace(/  /g, \"\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/^\\|+/g, \"\");\n    output=output.replace(/\\|$/, \"\");\n    output=output.replace(/ $/, \"\");\n    output=output.replace(/:\\|/g, \": \");\n    output=output.replace(/\\|/g, \"\\n\");\n    //console.log(output);\n    $('#v_credentials').val(output);\n}\n\n$(document).ready(function() {\n    $('#v_account').text($('input[name=v_account]').val());\n    $('#v_password').text($('input[name=v_password]').val());\n    generate_mail_credentials();\n\n    $('input[name=v_account]').change(function(){\n        $('#v_account').text($(this).val());\n        generate_mail_credentials();\n    });\n  \n    $('input[name=v_password]').change(function(){\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text($(this).val());\n        else\n            $('#v_password').text(Array($(this).val().length+1).join('*'));\n        generate_mail_credentials();\n    });\n\n    $('.toggle-psw-visibility-icon').click(function(){\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text($('input[name=v_password]').val());\n        else\n            $('#v_password').text(Array($('input[name=v_password]').val().length+1).join('*'));\n        generate_mail_credentials();\n    });\n\n    $('#mail_configuration').change(function(evt){\n        var opt = $(evt.target).find('option:selected');\n\n        switch(opt.attr('v_type')){\n            case 'hostname':\n                $('#td_imap_hostname').html(opt.attr('domain'));\n                $('#td_smtp_hostname').html(opt.attr('domain'));\n                break;\n            case 'starttls':\n                $('#td_imap_port').html('143');\n                $('#td_imap_encryption').html('STARTTLS');\n                $('#td_smtp_port').html('587');\n                $('#td_smtp_encryption').html('STARTTLS');\n                break;\n            case 'ssl':\n                $('#td_imap_port').html('993');\n                $('#td_imap_encryption').html('SSL / TLS');\n                $('#td_smtp_port').html('465');\n                $('#td_smtp_encryption').html('SSL / TLS');\n                break;\n            case 'no_encryption':\n                $('#td_imap_hostname').html(opt.attr('domain'));\n                $('#td_smtp_hostname').html(opt.attr('domain'));\n\n                $('#td_imap_port').html('143');\n                $('#td_imap_encryption').html(opt.attr('no_encryption'));\n                $('#td_smtp_port').html('25');\n                $('#td_smtp_encryption').html(opt.attr('no_encryption'));\n                break;\n        }\n        generate_mail_credentials();\n    });\n});\n", "<!-- Begin toolbar -->\n<div class=\"l-center edit\">\n\t<div class=\"l-sort clearfix\">\n\t\t<div class=\"l-unit-toolbar__buttonstrip\">\n\t\t\t<a class=\"ui-button cancel\" dir=\"ltr\" id=\"btn-back\" href=\"/list/db/\"><i class=\"fas fa-arrow-left status-icon blue\"></i><?=_('Back');?></a>\n\t\t</div>\n\t\t<div class=\"l-unit-toolbar__buttonstrip float-right\">\n\t\t\t<a href=\"#\" class=\"ui-button\" data-action=\"submit\" data-id=\"vstobjects\"><i class=\"fas fa-save status-icon purple\"></i><?=_('Save');?></a>\n\t\t</div>\n\t</div>\n</div>\n<!-- End toolbar -->\n\n<div class=\"l-separator\"></div>\n\n<div class=\"l-center animated fadeIn\">\n\n\t<form id=\"vstobjects\" name=\"v_add_db\" method=\"post\">\n\t\t<input type=\"hidden\" name=\"token\" value=\"<?=$_SESSION['token']?>\" />\n\t\t<input type=\"hidden\" name=\"ok\" value=\"Add\" />\n\n\t\t<table class=\"data mode-add\">\n\t\t\t<tr class=\"data-add\">\n\t\t\t\t<td class=\"data-dotted\">\n\t\t\t\t\t<table class=\"data-col1\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"data-dotted\">\n\t\t\t\t\t<table class=\"data-col2\" width=\"600px\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"step-top\">\n\t\t\t\t\t\t\t\t<span class=\"page-title\"><?=_('Adding database');?></span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<?php show_error_panel($_SESSION);?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<?php if (($user == 'admin') && (($_GET['accept'] !== \"true\")))  {?>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"step-top\">\n\t\t\t\t\t\t\t\t\t<span class=\"alert alert-danger alert-with-icon\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-exclamation\"></i>\n\t\t\t\t\t\t\t\t\t\t<?=_('Avoid adding web domains on admin account');?>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t<?php if (($user == 'admin') && (empty($_GET['accept']))) {?>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"step-top\">\n\t\t\t\t\t\t\t\t\t<span><a href=\"/add/user/\" class=\"vst-advanced admin-warning-button\"><?=_('Add User');?></a></span>\n\t\t\t\t\t\t\t\t\t<span><a href=\"/add/db/?accept=true\" class=\"vst-advanced button danger admin-warning-button\"><?=_('Continue');?></a> </span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t<?php if (($user == 'admin') && (($_GET['accept'] === \"true\")) || ($user !== \"admin\"))  {?>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"hint\">\n\t\t\t\t\t\t\t\t\t<?=sprintf(_('Prefix %s will be automatically added to database name and database user'),'<b>'.$user.'_</b>'); ?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text step-top input-label\">\n\t\t\t\t\t\t\t\t\t<?=_('Database');?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_database\" value=\"<?=htmlentities(trim($v_database, \"'\"))?>\">\n\t\t\t\t\t\t\t\t\t<small class=\"hint\"></small>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t<?=_('Type');?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<select class=\"vst-list\" name=\"v_type\">\n\t\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t\t\tforeach ($db_types as $key => $value) {\n\t\t\t\t\t\t\t\t\t\t\t\techo \"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"\".htmlentities($value).\"\\\"\";\n\t\t\t\t\t\t\t\t\t\t\t\tif ((!empty($v_type)) && ( $value == $v_type )) echo ' selected';\n\t\t\t\t\t\t\t\t\t\t\t\techo \">\".htmlentities($value).\"</option>\";\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t\tprint _('Username');\n\t\t\t\t\t\t\t\t\t\techo \"&nbsp;&nbsp;&nbsp;&nbsp;<em><small>(\".sprintf(_('maximum characters length, including prefix'), 32).\")</small></em>\";\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_dbuser\" value=\"<?=htmlentities(trim($v_dbuser, \"'\"))?>\">\n\t\t\t\t\t\t\t\t\t<small class=\"hint\"></small>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t<?=_('Password');?> <a href=\"javascript:randomString();\" title=\"<?=_('generate');?>\"><i class=\"fas fa-sync status-icon green icon-large\"></i></a>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input password\" name=\"v_password\"><br />\n\t\t\t\t\t\t\t\t\t<meter max=\"4\" id=\"meter\"></meter>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text\">\n\t\t\t\t\t\t\t\t\t<?=_('Your password must have at least');?>:\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li><?=_('8 characters long');?></li>\n\t\t\t\t\t\t\t\t\t\t<li><?=_('1 uppercase & 1 lowercase character');?></li>\n\t\t\t\t\t\t\t\t\t\t<li><?=_('1 number');?></li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t<?=_('Send login credentials to email address') ?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"vst-input\" name=\"v_db_email\" value=\"<?=htmlentities(trim($v_db_email, \"'\"))?>\">\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"step-top vst-text\" style=\"/*padding: 32px 0 20px 0;*/\">\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:elementHideShow('advanced-opts');\" class=\"vst-advanced\"><?=_('Advanced options');?></a>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"step-top\">\n\t\t\t\t\t\t\t\t\t<table id=\"advanced-opts\" style=\"display: none;\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?=_('Host');?>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"vst-list\" name=\"v_host\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ($db_hosts as $value) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\techo \"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"\".htmlentities($value).\"\\\"\";\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((!empty($v_host)) && ( $value == $v_host )) echo ' selected';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\techo \">\".htmlentities($value).\"</option>\";\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?=_('Charset');?>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"vst-list\" name=\"v_charset\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=big5 <?php if ((!empty($v_charset)) && ( $v_charset == 'big5')) echo 'selected';?>>big5</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=dec8 <?php if ((!empty($v_charset)) && ( $v_charset == 'dec8')) echo 'selected';?>>dec8</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp850 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp850')) echo 'selected';?>>cp850</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=hp8 <?php if ((!empty($v_charset)) && ( $v_charset == 'hp8')) echo 'selected';?>>hp8</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=koi8r <?php if ((!empty($v_charset)) && ( $v_charset == 'koi8r')) echo 'selected';?>>koi8r</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=latin1 <?php if ((!empty($v_charset)) && ( $v_charset == 'latin1')) echo 'selected';?>>latin1</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=latin2 <?php if ((!empty($v_charset)) && ( $v_charset == 'latin2')) echo 'selected';?>>latin2</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=swe7 <?php if ((!empty($v_charset)) && ( $v_charset == 'swe7')) echo 'selected';?>>swe7</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=ascii <?php if ((!empty($v_charset)) && ( $v_charset == 'ascii')) echo 'selected';?>>ascii</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=ujis <?php if ((!empty($v_charset)) && ( $v_charset == 'ujis')) echo 'selected';?>>ujis</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=sjis <?php if ((!empty($v_charset)) && ( $v_charset == 'sjis')) echo 'selected';?>>sjis</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=hebrew <?php if ((!empty($v_charset)) && ( $v_charset == 'hebrew')) echo 'selected';?>>hebrew</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=tis620 <?php if ((!empty($v_charset)) && ( $v_charset == 'tis620')) echo 'selected';?>>tis620</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=euckr <?php if ((!empty($v_charset)) && ( $v_charset == 'euckr')) echo 'selected';?>>euckr</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=koi8u <?php if ((!empty($v_charset)) && ( $v_charset == 'koi8u')) echo 'selected';?>>koi8u</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=gb2312 <?php if ((!empty($v_charset)) && ( $v_charset == 'gb2312')) echo 'selected';?>>gb2312</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=greek <?php if ((!empty($v_charset)) && ( $v_charset == 'greek')) echo 'selected';?>>greek</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp1250 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp1250')) echo 'selected';?>>cp1250</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=gbk <?php if ((!empty($v_charset)) && ( $v_charset == 'gbk')) echo 'selected';?>>gbk</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=latin5 <?php if ((!empty($v_charset)) && ( $v_charset == 'latin5')) echo 'selected';?>>latin5</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=armscii8 <?php if ((!empty($v_charset)) && ( $v_charset == 'armscii8')) echo 'selected';?>>armscii8</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=utf8 <?php if ((!empty($v_charset)) && ( $v_charset == 'utf8')) echo 'selected';?> <?php if (empty($v_charset)) echo 'selected';?>>utf8</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=utf8mb4 <?php if ((!empty($v_charset)) && ( $v_charset == 'utf8mb4')) echo 'selected';?>>utf8mb4</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=ucs2 <?php if ((!empty($v_charset)) && ( $v_charset == 'ucs2')) echo 'selected';?>>ucs2</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp866 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp866')) echo 'selected';?>>cp866</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=keybcs2 <?php if ((!empty($v_charset)) && ( $v_charset == 'keybcs2')) echo 'selected';?>>keybcs2</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=macce <?php if ((!empty($v_charset)) && ( $v_charset == 'macce')) echo 'selected';?>>macce</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=macroman <?php if ((!empty($v_charset)) && ( $v_charset == 'macroman')) echo 'selected';?>>macroman</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp852 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp852')) echo 'selected';?>>cp852</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=latin7 <?php if ((!empty($v_charset)) && ( $v_charset == 'latin7')) echo 'selected';?>>latin7</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp1251 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp1251')) echo 'selected';?>>cp1251</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp1256 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp1256')) echo 'selected';?>>cp1256</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp1257 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp1257')) echo 'selected';?>>cp1257</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=binary <?php if ((!empty($v_charset)) && ( $v_charset == 'binary')) echo 'selected';?>>binary</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=geostd8 <?php if ((!empty($v_charset)) && ( $v_charset == 'geostd8')) echo 'selected';?>>geostd8</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp932 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp932')) echo 'selected';?>>cp932</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=eucjpms <?php if ((!empty($v_charset)) && ( $v_charset == 'eucjpms')) echo 'selected';?>>eucjpms</option>\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t\t<table class=\"data-col2\">\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t<?php } ?>\n\t\t</table>\n\t</form>\n</div>\n\n<script>\nGLOBAL.DB_USER_PREFIX = \"<?=$user_plain;?>\";\nGLOBAL.DB_DBNAME_PREFIX = \"<?=$user_plain;?>\";\n</script>", "<!-- Begin toolbar -->\n<div class=\"l-center edit\">\n\t<div class=\"l-sort clearfix\">\n\t\t<div class=\"l-unit-toolbar__buttonstrip\">\n\t\t\t<a class=\"ui-button cancel\" dir=\"ltr\" id=\"btn-back\" href=\"/list/db/\"><i class=\"fas fa-arrow-left status-icon blue\"></i><?=_('Back');?></a>\n\t\t</div>\n\t\t<div class=\"l-unit-toolbar__buttonstrip float-right\">\n\t\t\t<a href=\"#\" class=\"ui-button\" data-action=\"submit\" data-id=\"vstobjects\"><i class=\"fas fa-save status-icon purple\"></i><?=_('Save');?></a>\n\t\t</div>\n\t</div>\n</div>\n<!-- End toolbar -->\n\n<div class=\"l-separator\"></div>\n\n<div class=\"l-center animated fadeIn\">\n\n\t<form id=\"vstobjects\" name=\"v_edit_db\" method=\"post\" class=\"<?=$v_status?>\">\n\t\t<input type=\"hidden\" name=\"token\" value=\"<?=$_SESSION['token']?>\" />\n\t\t<input type=\"hidden\" name=\"save\" value=\"save\" />\n\n\t\t<table class='data'>\n\t\t\t<tr class=\"data-add\">\n\t\t\t\t<td class=\"data-dotted\">\n\t\t\t\t\t<table class=\"data-col1\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"data-dotted\">\n\t\t\t\t\t<table class=\"data-col2\" width=\"600px\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"step-top\">\n\t\t\t\t\t\t\t\t<span class=\"page-title\"><?=_('Editing Database');?></span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<?php show_error_panel($_SESSION);?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text step-top\">\n\t\t\t\t\t\t\t\t<?=_('Database');?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_database\" value=\"<?=htmlentities(trim($v_database, \"'\"))?>\" disabled>\n\t\t\t\t\t\t\t\t<small class=\"hint\"></small>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprint _('Username');\n\t\t\t\t\t\t\t\t\techo \"&nbsp;&nbsp;&nbsp;&nbsp;<em><small>(\".sprintf(_('maximum characters length, including prefix'), 32).\")</small></em>\";\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_dbuser\" value=\"<?=htmlentities(trim($v_dbuser, \"'\"))?>\">\n\t\t\t\t\t\t\t\t<small class=\"hint\"></small>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t<?=_('Password');?> <a href=\"javascript:randomString();\" title=\"<?=_('generate');?>\"><i class=\"fas fa-sync status-icon green icon-large\"></i></a>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input password\" name=\"v_password\" value=\"<?=htmlentities(trim($v_password, \"'\"))?>\"><br />\n\t\t\t\t\t\t\t\t<meter max=\"4\" id=\"meter\"></meter>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text\">\n\t\t\t\t\t\t\t\t<?=_('Your password must have at least');?>:\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li><?=_('8 characters long');?></li>\n\t\t\t\t\t\t\t\t\t<li><?=_('1 uppercase & 1 lowercase character');?></li>\n\t\t\t\t\t\t\t\t\t<li><?=_('1 number');?></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t<?=_('Type');?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_type\" value=\"<?=htmlentities(trim($v_type, \"'\"))?>\" disabled>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t<?=_('Host');?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_host\" value=\"<?=htmlentities(trim($v_host, \"'\"))?>\" disabled>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t<?=_('Charset');?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_charset\" value=\"<?=htmlentities(trim($v_charset, \"'\"))?>\" disabled>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t\t<table class=\"data-col2\"></table>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</form>\n</div>\n<?php if ($v_type == 'pgsql'){ $user=strtolower($user); } ?>\n<script>\n    GLOBAL.DB_USER_PREFIX = \"<?=$user_plain;?>\";\n    GLOBAL.DB_DBNAME_PREFIX =  \"<?=$user_plain;?>\";\n</script>"], "fixing_code": ["/**\n * jQuery.browser.mobile (http://detectmobilebrowser.com/)\n *\n * jQuery.browser.mobile will be true if the browser is a mobile device\n *\n **/\n(function(a){(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);\n\n/*! jQuery JSON plugin 2.4.0 | code.google.com/p/jquery-json */\n(function(jQuery){'use strict';var escape=/[\"\\\\\\x00-\\x1f\\x7f-\\x9f]/g,meta={'\\b':'\\\\b','\\t':'\\\\t','\\n':'\\\\n','\\f':'\\\\f','\\r':'\\\\r','\"':'\\\\\"','\\\\':'\\\\\\\\'},hasOwn=Object.prototype.hasOwnProperty;jQuery.toJSON=typeof JSON==='object'&&JSON.stringify?JSON.stringify:function(o){if(o===null){return'null';}\nvar pairs,k,name,val,type=jQuery.type(o);if(type==='undefined'){return undefined;}\nif(type==='number'||type==='boolean'){return String(o);}\nif(type==='string'){return jQuery.quoteString(o);}\nif(typeof o.toJSON==='function'){return jQuery.toJSON(o.toJSON());}\nif(type==='date'){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10){month='0'+month;}\nif(day<10){day='0'+day;}\nif(hours<10){hours='0'+hours;}\nif(minutes<10){minutes='0'+minutes;}\nif(seconds<10){seconds='0'+seconds;}\nif(milli<100){milli='0'+milli;}\nif(milli<10){milli='0'+milli;}\nreturn'\"'+year+'-'+month+'-'+day+'T'+\nhours+':'+minutes+':'+seconds+'.'+milli+'Z\"';}\npairs=[];if(jQuery.isArray(o)){for(k=0;k<o.length;k++){pairs.push(jQuery.toJSON(o[k])||'null');}\nreturn'['+pairs.join(',')+']';}\nif(typeof o==='object'){for(k in o){if(hasOwn.call(o,k)){type=typeof k;if(type==='number'){name='\"'+k+'\"';}else if(type==='string'){name=jQuery.quoteString(k);}else{continue;}\ntype=typeof o[k];if(type!=='function'&&type!=='undefined'){val=jQuery.toJSON(o[k]);pairs.push(name+':'+val);}}}\nreturn'{'+pairs.join(',')+'}';}};jQuery.evalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(str){return eval('('+str+')');};jQuery.secureEvalJSON=typeof JSON==='object'&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\\\[\"\\\\\\/bfnrtu]/g,'@').replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,']').replace(/(?:^|:|,)(?:\\s*\\[)+/g,'');if(/^[\\],:{}\\s]*jQuery/.test(filtered)){return eval('('+str+')');}\nthrow new SyntaxError('Error parsing JSON, source is not valid.');};jQuery.quoteString=function(str){if(str.match(escape)){return'\"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==='string'){return c;}\nc=a.charCodeAt();return'\\\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'\"';}\nreturn'\"'+str+'\"';};}(jQuery));\n\n\n$.fn.scrollTo = function( target, options, callback ){\n  if(typeof options == 'function' && arguments.length == 2){ callback = options; options = target; }\n  var settings = $.extend({\n    scrollTarget  : target,\n    offsetTop     : 50,\n    duration      : 10,\n    easing        : 'swing'\n  }, options);\n  return this.each(function(){\n    var scrollPane = $(this);\n    var scrollTarget = (typeof settings.scrollTarget == \"number\") ? settings.scrollTarget : $(settings.scrollTarget);\n    var scrollY = (typeof scrollTarget == \"number\") ? scrollTarget : scrollTarget.offset().top + scrollPane.scrollTop() - parseInt(settings.offsetTop);\n    scrollPane.animate({scrollTop : scrollY }, parseInt(settings.duration), settings.easing, function(){\n      if (typeof callback == 'function') { callback.call(this); }\n    });\n  });\n}\n\n/*\n * Date Format 1.2.3\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\n * MIT license\n *\n * Includes enhancements by Scott Trenda <scott.trenda.net>\n * and Kris Kowal <cixar.com/~kris.kowal/>\n *\n * Accepts a date, a mask, or a date and a mask.\n * Returns a formatted version of the given date.\n * The date defaults to the current date/time.\n * The mask defaults to dateFormat.masks.default.\n */\n\nvar dateFormat = function () {\n    var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZ]|\"[^\"]*\"|'[^']*'/g,\n        timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g,\n        timezoneClip = /[^-+\\dA-Z]/g,\n        pad = function (val, len) {\n            val = String(val);\n            len = len || 2;\n            while (val.length < len) val = \"0\" + val;\n            return val;\n        };\n\n    // Regexes and supporting functions are cached through closure\n    return function (date, mask, utc) {\n        var dF = dateFormat;\n\n        // You can't provide utc if you skip other args (use the \"UTC:\" mask prefix)\n        if (arguments.length == 1 && Object.prototype.toString.call(date) == \"[object String]\" && !/\\d/.test(date)) {\n            mask = date;\n            date = undefined;\n        }\n\n        // Passing date through Date applies Date.parse, if necessary\n        date = date ? new Date(date) : new Date;\n        if (isNaN(date)) throw SyntaxError(\"invalid date\");\n\n        mask = String(dF.masks[mask] || mask || dF.masks[\"default\"]);\n\n        // Allow setting the utc argument via the mask\n        if (mask.slice(0, 4) == \"UTC:\") {\n            mask = mask.slice(4);\n            utc = true;\n        }\n\n        var _ = utc ? \"getUTC\" : \"get\",\n            d = date[_ + \"Date\"](),\n            D = date[_ + \"Day\"](),\n            m = date[_ + \"Month\"](),\n            y = date[_ + \"FullYear\"](),\n            H = date[_ + \"Hours\"](),\n            M = date[_ + \"Minutes\"](),\n            s = date[_ + \"Seconds\"](),\n            L = date[_ + \"Milliseconds\"](),\n            o = utc ? 0 : date.getTimezoneOffset(),\n            flags = {\n                d:    d,\n                dd:   pad(d),\n                ddd:  dF.i18n.dayNames[D],\n                dddd: dF.i18n.dayNames[D + 7],\n                m:    m + 1,\n                mm:   pad(m + 1),\n                mmm:  dF.i18n.monthNames[m],\n                mmmm: dF.i18n.monthNames[m + 12],\n                yy:   String(y).slice(2),\n                yyyy: y,\n                h:    H % 12 || 12,\n                hh:   pad(H % 12 || 12),\n                H:    H,\n                HH:   pad(H),\n                M:    M,\n                MM:   pad(M),\n                s:    s,\n                ss:   pad(s),\n                l:    pad(L, 3),\n                L:    pad(L > 99 ? Math.round(L / 10) : L),\n                t:    H < 12 ? \"a\"  : \"p\",\n                tt:   H < 12 ? \"am\" : \"pm\",\n                T:    H < 12 ? \"A\"  : \"P\",\n                TT:   H < 12 ? \"AM\" : \"PM\",\n                Z:    utc ? \"UTC\" : (String(date).match(timezone) || [\"\"]).pop().replace(timezoneClip, \"\"),\n                o:    (o > 0 ? \"-\" : \"+\") + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\n                S:    [\"th\", \"st\", \"nd\", \"rd\"][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10]\n            };\n\n        return mask.replace(token, function ($0) {\n            return $0 in flags ? flags[$0] : $0.slice(1, $0.length - 1);\n        });\n    };\n}();\n\n// Some common format strings\ndateFormat.masks = {\n    \"default\":      \"ddd mmm dd yyyy HH:MM:ss\",\n    shortDate:      \"m/d/yy\",\n    mediumDate:     \"mmm d, yyyy\",\n    longDate:       \"mmmm d, yyyy\",\n    fullDate:       \"dddd, mmmm d, yyyy\",\n    shortTime:      \"h:MM TT\",\n    mediumTime:     \"h:MM:ss TT\",\n    longTime:       \"h:MM:ss TT Z\",\n    isoDate:        \"yyyy-mm-dd\",\n    isoTime:        \"HH:MM:ss\",\n    isoDateTime:    \"yyyy-mm-dd'T'HH:MM:ss\",\n    isoUtcDateTime: \"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'\"\n};\n\n// Internationalization strings\ndateFormat.i18n = {\n    dayNames: [\n        \"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\",\n        \"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"\n    ],\n    monthNames: [\n        \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\",\n        \"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\n    ]\n};\n\n// For convenience...\nDate.prototype.format = function (mask, utc) {\n    return dateFormat(this, mask, utc);\n};\n\n\n\ufeff/*\n * http://code.google.com/p/flexible-js-formatting/\n * \n * Copyright (C) 2004 Baron Schwartz <baron at sequent dot org>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nDate.parseFunctions = {count:0};\nDate.parseRegexes = [];\nDate.formatFunctions = {count:0};\n\nDate.prototype.dateFormat = function(format, ignore_offset) {\n    if (Date.formatFunctions[format] == null) {\n        Date.createNewFormat(format);\n    }\n    var func = Date.formatFunctions[format];\n    if (ignore_offset || ! this.offset) {\n      return this[func]();\n    } else {\n      return (new Date(this.valueOf() - this.offset))[func]();\n    }\n};\n\nDate.createNewFormat = function(format) {\n    var funcName = \"format\" + Date.formatFunctions.count++;\n    Date.formatFunctions[format] = funcName;\n    var code = \"Date.prototype.\" + funcName + \" = function(){return \";\n    var special = false;\n    var ch = '';\n    for (var i = 0; i < format.length; ++i) {\n        ch = format.charAt(i);\n                // escape character start\n        if (!special && ch == \"\\\\\") {\n            special = true;\n        }\n                // escaped string\n        else if (!special && ch == '\"') {\n                        var end = format.indexOf('\"', i+1);\n                        if (end==-1)\n                        {\n                                end = format.length;\n                        }\n            code += \"'\" + String.escape(format.substring(i+1, end)) + \"' + \";\n                        i = end;\n        }\n                // escaped character\n        else if (special) {\n            special = false;\n            code += \"'\" + String.escape(ch) + \"' + \";\n        }\n        else {\n            code += Date.getFormatCode(ch);\n        }\n    }\n    eval(code.substring(0, code.length - 3) + \";}\");\n};\n\nDate.getFormatCode = function(character) {\n    switch (character) {\n    case \"d\":\n        return \"String.leftPad(this.getDate(), 2, '0') + \";\n    case \"D\":\n        return \"Date.dayNames[this.getDay()].substring(0, 3) + \";\n    case \"j\":\n        return \"this.getDate() + \";\n    case \"l\":\n        return \"Date.dayNames[this.getDay()] + \";\n    case \"S\":\n        return \"this.getSuffix() + \";\n    case \"w\":\n        return \"this.getDay() + \";\n    case \"z\":\n        return \"this.getDayOfYear() + \";\n    case \"W\":\n        return \"this.getWeekOfYear() + \";\n    case \"F\":\n        return \"Date.monthNames[this.getMonth()] + \";\n    case \"m\":\n        return \"String.leftPad(this.getMonth() + 1, 2, '0') + \";\n    case \"M\":\n        return \"Date.monthNames[this.getMonth()].substring(0, 3) + \";\n    case \"n\":\n        return \"(this.getMonth() + 1) + \";\n    case \"t\":\n        return \"this.getDaysInMonth() + \";\n    case \"L\":\n        return \"(this.isLeapYear() ? 1 : 0) + \";\n    case \"Y\":\n        return \"this.getFullYear() + \";\n    case \"y\":\n        return \"('' + this.getFullYear()).substring(2, 4) + \";\n    case \"a\":\n        return \"(this.getHours() < 12 ? 'am' : 'pm') + \";\n    case \"A\":\n        return \"(this.getHours() < 12 ? 'AM' : 'PM') + \";\n    case \"g\":\n        return \"((this.getHours() %12) ? this.getHours() % 12 : 12) + \";\n    case \"G\":\n        return \"this.getHours() + \";\n    case \"h\":\n        return \"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + \";\n    case \"H\":\n        return \"String.leftPad(this.getHours(), 2, '0') + \";\n    case \"i\":\n        return \"String.leftPad(this.getMinutes(), 2, '0') + \";\n    case \"s\":\n        return \"String.leftPad(this.getSeconds(), 2, '0') + \";\n    case \"X\":\n        return \"String.leftPad(this.getMilliseconds(), 3, '0') + \";\n    case \"O\":\n        return \"this.getGMTOffset() + \";\n    case \"T\":\n        return \"this.getTimezone() + \";\n    case \"Z\":\n        return \"(this.getTimezoneOffset() * -60) + \";\n    case \"q\":   // quarter num, Q for name?\n        return \"this.getQuarter() + \";\n    default:\n        return \"'\" + String.escape(character) + \"' + \";\n    }\n};\n\nDate.parseDate = function(input, format) {\n    if (Date.parseFunctions[format] == null) {\n        Date.createParser(format);\n    }\n    var func = Date.parseFunctions[format];\n    return Date[func](input);\n};\n\nDate.createParser = function(format) {\n    var funcName = \"parse\" + Date.parseFunctions.count++;\n    var regexNum = Date.parseRegexes.length;\n    var currentGroup = 1;\n    Date.parseFunctions[format] = funcName;\n\n    var code = \"Date.\" + funcName + \" = function(input){\\n\"\n        + \"var y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, ms = -1, z = 0;\\n\"\n        + \"var d = new Date();\\n\"\n        + \"y = d.getFullYear();\\n\"\n        + \"m = d.getMonth();\\n\"\n        + \"d = d.getDate();\\n\"\n        + \"var results = input.match(Date.parseRegexes[\" + regexNum + \"]);\\n\"\n        + \"if (results && results.length > 0) {\" ;\n    var regex = \"\";\n\n    var special = false;\n    var ch = '';\n    for (var i = 0; i < format.length; ++i) {\n        ch = format.charAt(i);\n        if (!special && ch == \"\\\\\") {\n            special = true;\n        }\n        else if (special) {\n            special = false;\n            regex += String.escape(ch);\n        }\n        else {\n            obj = Date.formatCodeToRegex(ch, currentGroup);\n            currentGroup += obj.g;\n            regex += obj.s;\n            if (obj.g && obj.c) {\n                code += obj.c;\n            }\n        }\n    }\n\n    code += \"if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0 && ms >= 0)\\n\"\n        + \"{return new Date(y, m, d, h, i, s, ms).applyOffset(z);}\\n\"\n        + \"if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\\n\"\n        + \"{return new Date(y, m, d, h, i, s).applyOffset(z);}\\n\"\n        + \"else if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\\n\"\n        + \"{return new Date(y, m, d, h, i).applyOffset(z);}\\n\"\n        + \"else if (y > 0 && m >= 0 && d > 0 && h >= 0)\\n\"\n        + \"{return new Date(y, m, d, h).applyOffset(z);}\\n\"\n        + \"else if (y > 0 && m >= 0 && d > 0)\\n\"\n        + \"{return new Date(y, m, d).applyOffset(z);}\\n\"\n        + \"else if (y > 0 && m >= 0)\\n\"\n        + \"{return new Date(y, m).applyOffset(z);}\\n\"\n        + \"else if (y > 0)\\n\"\n        + \"{return new Date(y).applyOffset(z);}\\n\"\n        + \"}return null;}\";\n\n    Date.parseRegexes[regexNum] = new RegExp(\"^\" + regex + \"$\");\n    eval(code);\n};\n\nDate.formatCodeToRegex = function(character, currentGroup) {\n    switch (character) {\n    case \"D\":\n        return {g:0,\n        c:null,\n        s:\"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\"};\n    case \"j\":\n    case \"d\":\n        return {g:1,\n            c:\"d = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(\\\\d{1,2})\"};\n    case \"l\":\n        return {g:0,\n            c:null,\n            s:\"(?:\" + Date.dayNames.join(\"|\") + \")\"};\n    case \"S\":\n        return {g:0,\n            c:null,\n            s:\"(?:st|nd|rd|th)\"};\n    case \"w\":\n        return {g:0,\n            c:null,\n            s:\"\\\\d\"};\n    case \"z\":\n        return {g:0,\n            c:null,\n            s:\"(?:\\\\d{1,3})\"};\n    case \"W\":\n        return {g:0,\n            c:null,\n            s:\"(?:\\\\d{2})\"};\n    case \"F\":\n        return {g:1,\n            c:\"m = parseInt(Date.monthNumbers[results[\" + currentGroup + \"].substring(0, 3)], 10);\\n\",\n            s:\"(\" + Date.monthNames.join(\"|\") + \")\"};\n    case \"M\":\n        return {g:1,\n            c:\"m = parseInt(Date.monthNumbers[results[\" + currentGroup + \"]], 10);\\n\",\n            s:\"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\"};\n    case \"n\":\n    case \"m\":\n        return {g:1,\n            c:\"m = parseInt(results[\" + currentGroup + \"], 10) - 1;\\n\",\n            s:\"(\\\\d{1,2})\"};\n    case \"t\":\n        return {g:0,\n            c:null,\n            s:\"\\\\d{1,2}\"};\n    case \"L\":\n        return {g:0,\n            c:null,\n            s:\"(?:1|0)\"};\n    case \"Y\":\n        return {g:1,\n            c:\"y = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(\\\\d{4})\"};\n    case \"y\":\n        return {g:1,\n            c:\"var ty = parseInt(results[\" + currentGroup + \"], 10);\\n\"\n                + \"y = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\\n\",\n            s:\"(\\\\d{1,2})\"};\n    case \"a\":\n        return {g:1,\n            c:\"if (results[\" + currentGroup + \"] == 'am') {\\n\"\n                + \"if (h == 12) { h = 0; }\\n\"\n                + \"} else { if (h < 12) { h += 12; }}\",\n            s:\"(am|pm)\"};\n    case \"A\":\n        return {g:1,\n            c:\"if (results[\" + currentGroup + \"] == 'AM') {\\n\"\n                + \"if (h == 12) { h = 0; }\\n\"\n                + \"} else { if (h < 12) { h += 12; }}\",\n            s:\"(AM|PM)\"};\n    case \"g\":\n    case \"G\":\n    case \"h\":\n    case \"H\":\n        return {g:1,\n            c:\"h = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(\\\\d{1,2})\"};\n    case \"i\":\n        return {g:1,\n            c:\"i = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(\\\\d{2})\"};\n    case \"s\":\n        return {g:1,\n            c:\"s = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(\\\\d{2})\"};\n    case \"X\":\n      return {g:1,\n          c:\"ms = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n          s:\"(\\\\d{3})\"};\n    case \"O\":\n    case \"P\":\n        return {g:1,\n            c:\"z = Date.parseOffset(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"(Z|[+-]\\\\d{2}:?\\\\d{2})\"}; // \"Z\", \"+05:00\", \"+0500\" all acceptable.\n    case \"T\":\n        return {g:0,\n            c:null,\n            s:\"[A-Z]{3}\"};\n    case \"Z\":\n        return {g:1,\n            c:\"s = parseInt(results[\" + currentGroup + \"], 10);\\n\",\n            s:\"([+-]\\\\d{1,5})\"};\n    default:\n        return {g:0,\n            c:null,\n            s:String.escape(character)};\n    }\n};\n\nDate.parseOffset = function(str) {\n  if (str == \"Z\") { return 0 ; } // UTC, no offset.\n  var seconds ;\n  seconds = parseInt(str[0] + str[1] + str[2]) * 3600 ; // e.g., \"+05\" or \"-08\"\n  if (str[3] == \":\") {            // \"+HH:MM\" is preferred iso8601 format (\"O\")\n    seconds += parseInt(str[4] + str[5]) * 60;\n  } else {                      // \"+HHMM\" is frequently used, though. (\"P\")\n    seconds += parseInt(str[3] + str[4]) * 60;\n  }\n  return seconds ;\n};\n\nDate.today = function() {\n    var now = new Date();\n    now.setHours(0);\n    now.setMinutes(0);\n    now.setSeconds(0);\n    \n    return now;\n}\n\n// convert the parsed date into UTC, but store the offset so we can optionally use it in dateFormat()\nDate.prototype.applyOffset = function(offset_seconds) {\n  this.offset = offset_seconds * 1000 ;\n  this.setTime(this.valueOf() + this.offset);\n  return this ;\n};\n\nDate.prototype.getTimezone = function() {\n    return this.toString().replace(\n        /^.*? ([A-Z]{3}) [0-9]{4}.*$/, \"$1\").replace(\n        /^.*?\\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\\)$/, \"$1$2$3\").replace(\n        /^.*?[0-9]{4} \\(([A-Z]{3})\\)/, \"$1\");\n};\n\nDate.prototype.getGMTOffset = function() {\n    return (this.getTimezoneOffset() > 0 ? \"-\" : \"+\")\n        + String.leftPad(Math.floor(this.getTimezoneOffset() / 60), 2, \"0\")\n        + String.leftPad(this.getTimezoneOffset() % 60, 2, \"0\");\n};\n\nDate.prototype.getDayOfYear = function() {\n    var num = 0;\n    Date.daysInMonth[1] = this.isLeapYear() ? 29 : 28;\n    for (var i = 0; i < this.getMonth(); ++i) {\n        num += Date.daysInMonth[i];\n    }\n    return num + this.getDate() - 1;\n};\n\nDate.prototype.getWeekOfYear = function() {\n    // Skip to Thursday of this week\n    var now = this.getDayOfYear() + (4 - this.getDay());\n    // Find the first Thursday of the year\n    var jan1 = new Date(this.getFullYear(), 0, 1);\n    var then = (7 - jan1.getDay() + 4);\n    document.write(then);\n    return String.leftPad(((now - then) / 7) + 1, 2, \"0\");\n};\n\nDate.prototype.isLeapYear = function() {\n    var year = this.getFullYear();\n    return ((year & 3) == 0 && (year % 100 || (year % 400 == 0 && year)));\n};\n\nDate.prototype.getFirstDayOfMonth = function() {\n    var day = (this.getDay() - (this.getDate() - 1)) % 7;\n    return (day < 0) ? (day + 7) : day;\n};\n\nDate.prototype.getLastDayOfMonth = function() {\n    var day = (this.getDay() + (Date.daysInMonth[this.getMonth()] - this.getDate())) % 7;\n    return (day < 0) ? (day + 7) : day;\n};\n\nDate.prototype.getDaysInMonth = function() {\n    Date.daysInMonth[1] = this.isLeapYear() ? 29 : 28;\n    return Date.daysInMonth[this.getMonth()];\n};\nDate.prototype.getQuarter = function() {\n    return Date.quarterFromMonthNum[this.getMonth()];\n};\n\nDate.prototype.getSuffix = function() {\n    switch (this.getDate()) {\n        case 1:\n        case 21:\n        case 31:\n            return \"st\";\n        case 2:\n        case 22:\n            return \"nd\";\n        case 3:\n        case 23:\n            return \"rd\";\n        default:\n            return \"th\";\n    }\n};\n\nString.escape = function(string) {\n    return string.replace(/('|\\\\)/g, \"\\\\$1\");\n};\n\nString.leftPad = function (val, size, ch) {\n    var result = new String(val);\n    if (ch == null) {\n        ch = \" \";\n    }\n    while (result.length < size) {\n        result = ch + result;\n    }\n    return result;\n};\n\nDate.quarterFromMonthNum = [1,1,1,2,2,2,3,3,3,4,4,4];\nDate.daysInMonth = [31,28,31,30,31,30,31,31,30,31,30,31];\nDate.monthNames =\n   [\"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\"];\nDate.dayNames =\n   [\"Sunday\",\n    \"Monday\",\n    \"Tuesday\",\n    \"Wednesday\",\n    \"Thursday\",\n    \"Friday\",\n    \"Saturday\"];\nDate.y2kYear = 50;\nDate.monthNumbers = {\n    Jan:0,\n    Feb:1,\n    Mar:2,\n    Apr:3,\n    May:4,\n    Jun:5,\n    Jul:6,\n    Aug:7,\n    Sep:8,\n    Oct:9,\n    Nov:10,\n    Dec:11};\nDate.patterns = {\n    ISO8601LongPattern: \"Y\\\\-m\\\\-d\\\\TH\\\\:i\\\\:sO\",\n    ISO8601ShortPattern: \"Y\\\\-m\\\\-d\",\n    ShortDatePattern: \"n/j/Y\",\n    LongDatePattern: \"l, F d, Y\",\n    FullDateTimePattern: \"l, F d, Y g:i:s A\",\n    MonthDayPattern: \"F d\",\n    ShortTimePattern: \"g:i A\",\n    LongTimePattern: \"g:i:s A\",\n    SortableDateTimePattern: \"Y-m-d\\\\TH:i:s\",\n    UniversalSortableDateTimePattern: \"Y-m-d H:i:sO\",\n    YearMonthPattern: \"F, Y\"};\n\n\n/**\n *\n * @author: Malishev Dmitry <dima.malishev@gmail.com>\n */\nvar _DEBUG = true;\nvar _DEBUG_LEVEL = 'ALL';\n// possible levels: ALL, IMPORTANT\nvar Error = {FATAL: 1, WARNING: 0, NORMAL: -1};\n\n\n/**\n * Init debug, grabs console object if accessible, or makes dummy debugger\n */\nvar fb = _DEBUG && 'undefined' != typeof(console) ? console : {\n    log         : function(){},\n    debug       : function(){},\n    info        : function(){},\n    warn        : function(){},\n    error       : function(){},\n    assert      : function(){},\n    dir         : function(){},\n    dirxml      : function(){},\n    trace       : function(){},\n    group       : function(){},\n    groupEnd    : function(){},\n    time        : function(){},\n    timeEnd     : function(){},\n    profile     : function(){},\n    profileEnd  : function(){},\n    count       : function(){},\n    msg         : function(){}\n};\n\nvar checked = false;\nvar frmname = '';\nvar lastScrollTop = 0;\n\n\n//\nvar App = {\n    // Main namespases for page specific functions\n    // Core namespaces\n    Ajax: { \n        Busy: {} \n    },\n    Core: {},\n    // CONSTANT VALUES\n    Constants: {\n        UNLIM_VALUE: 'unlimited', // overritten in i18n.js.php\n        UNLIM_TRANSLATED_VALUE: 'unlimited' // overritten in i18n.js.php\n    }, \n    // Actions. More widly used funcs\n    Actions: {\n        DB:      {},\n        WEB:     {},\n        PACKAGE: {},\n        MAIL_ACC:{},\n        MAIL:    {}\n    },\n    // Utilities\n    Helpers: {},\n    HTML: {\n        Build: {}\n    },\n    Filters: {},\n    Env: {\n        lang: GLOBAL.lang,\n    },\n    i18n: {},\n    Listeners: {\n        DB:      {},\n        WEB:     {},\n        PACKAGE: {},\n        MAIL_ACC:{}\n    },\n    View:{\n        HTML: {\n            Build: {}\n        },\n        // pages related views\n    },\n    Cache: {\n        clear: function() {} // TODO: stub method, will be used later\n    },\n    Ref: {},\n    Tmp: {},\n    Thread: {\n        run: function(delay, ref) {\n            setTimeout(function() {\n                ref();\n            }, delay*10);\n        }\n    },\n    Settings: { \n        GLOBAL:  {}, \n        General: {}\n    },\n    Templates: {\n        Templator: null,\n        Tpl:       {},\n        _indexes:  {}\n    }\n};\n\n// Internals\nArray.prototype.set = function(key, value){\n    var index = this[0][key];\n    this[1][index] = value;\n}\nArray.prototype.get = function(key){\n    var index = this[0][key];\n    return this[1][index];\n}\nArray.prototype.finalize = function(){\n    this.shift();\n    this[0] = this[0].join('');\n    return this[0];\n}\nArray.prototype.done = function(){\n    return this.join('');\n}\n\nString.prototype.wrapperize = function(key, ns){\n    var tpl = App.Templates.get(key, ns);\n    tpl.set(':content', this);\n\n    return tpl.finalize();\n}\n\n\n\nApp.Ajax.request = function(method, data, callback, onError){\n    // this will prevent multiple ajaxes on user clicks\n    /*if (App.Helpers.isAjaxBusy(method, data)) {\n        fb.warn('ajax request ['+method+'] is busy');\n        return;\n    }*/\n    //App.Helpers.setAjaxBusy(method, data);\n    data = data || {};\n\n    var prgs = $('.progress-container');\n\n    switch (method) {\n        case 'cd':\n            prgs.find('title').text('Opening dir');\n            prgs.show();\n            break;\n        case 'delete_files':\n            prgs.find('title').text('Deleting');\n            prgs.show();\n            break;\n        case 'unpack_item':\n            prgs.find('title').text('Unpacking');\n            prgs.show();\n            break;\n        case 'create_file':\n            prgs.find('title').text('Creating file');\n            prgs.show();\n            break;\n        case 'create_dir':\n            prgs.find('title').text('Creating directory');\n            prgs.show();\n            break;\n        case 'rename_file':\n            prgs.find('title').text('Renaming file');\n            prgs.show();\n            break;\n        case 'copy_file':\n        case 'copy_directory':\n            prgs.find('title').text('Copying files');\n            prgs.show();\n            break;\n        default:\n            break;\n    }\n\n    jQuery.ajax({\n        url: GLOBAL.ajax_url,\n        global: false,\n        type: data.request_method || \"GET\",\n        data: jQuery.extend(data, {'action': method}),\n        dataType: \"text boost\",\n        converters: {\n            \"text boost\": function(value) {\n                value = value.trim();\n                return $.parseJSON(value);\n        }},\n        async: true,\n        cache: false,\n        error: function(jqXHR, textStatus, errorThrown)\n        {\n            prgs.hide();\n            onError && onError();\n            if ('undefined' != typeof onError) {\n                fb.error(textStatus);\n            }\n        },\n        complete: function()\n        {\n            //App.Helpers.setAjaxFree(method, data);\n            prgs.hide();\n        },\n        success: function(reply)\n        {\n            prgs.hide();\n            //App.Helpers.setAjaxFree(method, data);\n            try {\n                callback && callback(reply);\n            }\n            catch(e) {\n                fb.error('GENERAL ERROR with ajax method: ' + data.request_method + ' ' + e);\n                //App.Helpers.generalError();\n            }\n        }\n    });\n}\n\njQuery.extend({\n    keys:    function(obj){\n        if (!obj) {\n            return [];\n        }\n        var a = [];\n        jQuery.each(obj, function(k){ a.push(k) });\n        return a;\n    }\n})\n\n\nApp.Core.create_hidden_form = function(action){\n    var form = jQuery('<form>', {\n            id     : 'hidden-form',\n            method : 'post',\n            action : action\n        });\n    jQuery('body').append(form);\n\n    return form;\n};\n\nApp.Core.extend_from_json = function(elm, data, prefix){\n    elm      = jQuery(elm);\n    var data = App.Core.flatten_json(data, prefix);\n    var keys = jQuery.keys(data);\n    for(var i=0, cnt=keys.length; i<cnt; i++)\n    {\n        elm.append(jQuery('<input>', {\n            name : keys[i],\n            value: data[keys[i]],\n            type : 'hidden'\n        }));\n    }\n\n    return elm;\n}\n\nApp.Core.flatten_json = function(data, prefix){\n    var keys   = jQuery.keys(data);\n    var result = {};\n\n    prefix || (prefix = '');\n\n    if(keys.length)\n    {\n        for(var i=0, cnt=keys.length; i<cnt; i++)\n        {\n            var value = data[keys[i]];\n            switch(typeof(value))\n            {\n                case 'function': break;\n                case 'object'  : result = jQuery.extend(result, App.Core.flatten_json(value, prefix + '[' + keys[i] + ']')); break;\n                default        : result[prefix + '[' + keys[i] + ']'] = value;\n            }\n        }\n        return result;\n    }\n    else\n    {\n        return false;\n    }\n}\n\n//\n// Cookies adapter\n// Allow to work old pages realisations of cookie requests\n//\nfunction createCookie(name, value, expire_days) {\n    jQuery.cookie(name, value, { expires: expire_days});\n}\n\nfunction readCookie(name) {\n    jQuery.cookie(name);\n}\n\nfunction eraseCookie(name) {\n    jQuery.removeCookie(name);\n}\n\n\n/**\n * Timer for profiling\n */\nvar timer = {};\ntimer.start = function()\n{\n    timer.start_time = new Date();\n}\n\ntimer.stop = function( msg )\n{\n    timer.stop_time = new Date();\n    timer.print( msg );\n}\n\ntimer.print = function( msg )\n{\n    var passed = timer.stop_time - timer.start_time;\n    fb.info( msg || '' + passed / 1000 );\n}\n\n\nString.prototype.trim = function()\n{\n    var str = this;\n    str = str.replace(/^\\s+/, '');\n    for (var i = str.length - 1; i >= 0; i--) {\n        if (/\\S/.test(str.charAt(i))) {\n            str = str.substring(0, i + 1);\n        break;\n        }\n    }\n    return str;\n}\n\nhover_menu = function() {\n    var sep_1 = $('div.l-content > div.l-separator:nth-of-type(2)');\n    var sep_2 = $('div.l-content > div.l-separator:nth-of-type(4)');\n    var nav_main = $('.l-stat');\n    var nav_a = $('.l-stat .l-stat__col a');\n    var nav_context = $('.l-sort');\n\n    var st = $(window).scrollTop();\n\n    if (st <= 112) {\n        sep_1.css({'margin-top': 180 - st + 'px'});\n        sep_2.css({'margin-top': 225 - st + 'px'});\n        nav_a.css({'height': 111 - st + 'px'});\n        nav_a.css({'min-height': 111 - st + 'px'});\n        nav_context.css({'margin-top': 181 - st + 'px'});\n        sep_2.css({'box-shadow':'none'});\n        sep_2.css({'height': '1px'});\n    }\n\n    if(st > 112){\n        sep_1.css({'margin-top': '100px'});\n        sep_2.css({'margin-top': '130px'});\n        sep_2.css({'height': '15px'});\n        nav_a.css({'height': '0'});\n        nav_a.css({'min-height': '0'});\n        nav_context.css({'margin-top': '101px'});\n        nav_a.find('ul').css({'visibility': 'hidden'});\n        nav_main.css({'padding-top': '27px'});\n        sep_2.css({'box-shadow':'0 5px 6px 0 rgba(200, 200, 200, 0.35)'});\n    }\n\n    if(st == 0){\n        nav_a.css({'min-height': '70px'});\n        nav_a.css({'height': '70px'});\n    }\n\n    if(st < 109 ){\n        nav_a.find('ul').css({'visibility': 'visible'});\n        nav_main.css({'padding-top': 36 + 'px'});\n    }\n\n    if (st <= 112 && st > 110 ) {\n        nav_main.css({'padding-top': 36 - st + 109  + 'px'});\n    }\n\n    lastScrollTop = st;\n}\n\n\nfunction checkedAll(frmname) {\n    if($('input#toggle-all').prop('checked')){\n        $('.l-unit:not(.header)').addClass(\"selected\");\n        $('.ch-toggle').prop(\"checked\", true);\n        $('.toggle-all').addClass('clicked-on');\n    } else {\n        $('.l-unit:not(.header)').removeClass(\"selected\");\n        $('.ch-toggle').prop(\"checked\", false);\n        $('.toggle-all').removeClass('clicked-on');\n    }\n}\n\nfunction doSearch(url) {\n    var url = url || '/search/';\n    var loc = url + '?q=' + $('.search-input').val() + '&token=' +  $('input[name=\"token\"]').val();\n    location.href = loc;\n    return false;\n}\n\n\nfunction elementHideShow(elementToHideOrShow,trigger){\n    var el = document.getElementById(elementToHideOrShow);\n    el.style.display = el.style.display === 'none' ? 'block' : 'none';\n    \n    if (typeof trigger !== 'undefined') {\n        trigger.querySelector('.section-hide-button').classList.toggle('fa-minus-square');\n        trigger.querySelector('.section-hide-button').classList.toggle('fa-plus-square');\n    }\n}\n", "//\n//\n// Updates database username dynamically, showing its prefix\nApp.Actions.DB.update_db_username_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').text('');\n    } \n    $(elm).parent().find('.hint').text(GLOBAL.DB_USER_PREFIX + hint);\n}\n\n//\n//\n// Updates database name dynamically, showing its prefix\nApp.Actions.DB.update_db_databasename_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').text('');\n    } \n    $(elm).parent().find('.hint').text(GLOBAL.DB_DBNAME_PREFIX + hint);\n}\n\n//\n// listener that triggers database user hint updating\nApp.Listeners.DB.keypress_db_username = function() {\n    var ref = $('input[name=\"v_dbuser\"]');\n    var current_val = ref.val();\n    if (current_val.trim() != '') {\n        App.Actions.DB.update_db_username_hint(ref, current_val);\n    }\n    \n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_db_username_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\n//\n// listener that triggers database name hint updating\nApp.Listeners.DB.keypress_db_databasename = function() {\n    var ref = $('input[name=\"v_database\"]');\n    var current_val = ref.val();\n    if (current_val.trim() != '') {\n        App.Actions.DB.update_db_databasename_hint(ref, current_val);\n    }\n    \n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_dbn_tmt);\n        window.frp_dbn_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_db_databasename_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\nApp.Actions.DB.update_v_password = function (){\n    var password = $('input[name=\"v_password\"]').val();\n    var min_small = new RegExp(/^(?=.*[a-z]).+$/);\n    var min_cap = new RegExp(/^(?=.*[A-Z]).+$/);\n    var min_num = new RegExp(/^(?=.*\\d).+$/); \n    var min_length = 8;\n    var score = 0;\n    \n    if(password.length >= min_length) { score = score + 1; }\n    if(min_small.test(password)) { score = score + 1;}\n    if(min_cap.test(password)) { score = score + 1;}\n    if(min_num.test(password)) { score = score+ 1; }\n    $('#meter').val(score);   \n}\n\nApp.Listeners.DB.keypress_v_password = function() {\n    var ref = $('input[name=\"v_password\"]');\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_v_password(elm, $(elm).val());\n        }, 100);\n    });\n}\n\nApp.Listeners.DB.keypress_v_password();\n\n//\n// Page entry point\n// Trigger listeners\nApp.Listeners.DB.keypress_db_username();\nApp.Listeners.DB.keypress_db_databasename();\n\nrandomString = function(min_length = 16) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = min_length;\n    var randomstring = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        randomstring += chars.substr(rnum, 1);\n    }\n    var regex = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\\d)[a-zA-Z\\d]{8,}$/);\n    if(!regex.test(randomstring)){\n        randomString();\n    }else{\n        $('input[name=v_password]').val(randomstring);\n        App.Actions.DB.update_v_password();\n    }    \n}\n", "//\n//\n// Updates database dns record dynamically, showing its full domain path\nApp.Actions.DB.update_dns_record_hint = function(elm, hint) {\n    // clean hint\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').text('');\n    }\n\n    // set domain name without rec in case of @ entries\n    if (hint == '@') {\n        hint = '';\n    }\n\n    // dont show pregix if domain name = rec value\n    if (hint == GLOBAL.DNS_REC_PREFIX + '.') {\n        hint = '';\n    }\n\n    // add dot at the end if needed\n    if (hint != '' && hint.slice(-1) != '.') {\n        hint += '.';\n    }\n\n    $(elm).parent().find('.hint').text(hint + GLOBAL.DNS_REC_PREFIX);\n}\n\n//\n// listener that triggers dns record name hint updating\nApp.Listeners.DB.keypress_dns_rec_entry = function() {\n    var ref = $('input[name=\"v_rec\"]');\n    var current_rec = ref.val();\n    if (current_rec.trim() != '') {\n        App.Actions.DB.update_dns_record_hint(ref, current_rec);\n    }\n\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_dns_record_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\n//\n// Page entry point\n// Trigger listeners\nApp.Listeners.DB.keypress_dns_rec_entry();\n", "App.Actions.MAIL_ACC.enable_unlimited = function(elm, source_elm) {\n    $(elm).data('checked', true);\n    $(elm).data('prev_value', $(elm).val()); // save prev value in order to restore if needed\n    $(elm).val(App.Constants.UNLIM_TRANSLATED_VALUE);\n    $(elm).attr('disabled', true);\n    $(source_elm).css('opacity', '1');\n}\n\nApp.Actions.MAIL_ACC.disable_unlimited = function(elm, source_elm) {\n    $(elm).data('checked', false);\n    if ($(elm).data('prev_value') && $(elm).data('prev_value').trim() != '') {\n        var prev_value = $(elm).data('prev_value').trim();\n        $(elm).val(prev_value);\n        if (App.Helpers.isUnlimitedValue(prev_value)) {\n            $(elm).val('0');\n        }\n    }\n    else {\n        if (App.Helpers.isUnlimitedValue($(elm).val())) {\n            $(elm).val('0');\n        }\n    }\n    $(elm).attr('disabled', false);\n    $(source_elm).css('opacity', '0.5');\n}\n\nApp.Actions.MAIL_ACC.toggle_unlimited_feature = function(evt) {\n    var elm = $(evt.target);\n    var ref = elm.prev('.vst-input');\n    if (!$(ref).data('checked')) {\n        App.Actions.MAIL_ACC.enable_unlimited(ref, elm);\n    }\n    else {\n        App.Actions.MAIL_ACC.disable_unlimited(ref, elm);\n    }\n}\n\nApp.Listeners.MAIL_ACC.checkbox_unlimited_feature = function() {\n    $('.unlim-trigger').on('click', App.Actions.MAIL_ACC.toggle_unlimited_feature);\n}\n\nApp.Listeners.MAIL_ACC.init = function() {\n    $('.unlim-trigger').each(function(i, elm) {\n        var ref = $(elm).prev('.vst-input');\n        if (App.Helpers.isUnlimitedValue($(ref).val())) {\n            App.Actions.MAIL_ACC.enable_unlimited(ref, elm);\n        }\n        else {\n            $(ref).data('prev_value', $(ref).val());\n            App.Actions.MAIL_ACC.disable_unlimited(ref, elm);\n        }\n    });\n}\n\nApp.Helpers.isUnlimitedValue = function(value) {\n    var value = value.trim();\n    if (value == App.Constants.UNLIM_VALUE || value == App.Constants.UNLIM_TRANSLATED_VALUE) {\n        return true;\n    }\n\n    return false;\n}\n\n//\n// Page entry point\n// Trigger listeners\nApp.Listeners.MAIL_ACC.init();\nApp.Listeners.MAIL_ACC.checkbox_unlimited_feature();\n$('#v_blackhole').on('click', function(evt){\n    if($('#v_blackhole').is(':checked')){\n       $('#v_fwd').prop('disabled', true);\n       $('#v_fwd_for').prop('checked', true);\n       $('#id_fwd_for').hide();\n    }else{\n       $('#v_fwd').prop('disabled', false);\n       $('#id_fwd_for').show();        \n    }\n});\n$('form[name=\"v_quota\"]').on('submit', function(evt) {\n    $('input:disabled').each(function(i, elm) {\n        $(elm).attr('disabled', false);\n        if (App.Helpers.isUnlimitedValue($(elm).val())) {\n            $(elm).val(App.Constants.UNLIM_VALUE);\n        }\n    });\n});\n\nApp.Actions.MAIL_ACC.update_v_password = function (){\n    var password = $('input[name=\"v_password\"]').val();\n    var min_small = new RegExp(/^(?=.*[a-z]).+$/);\n    var min_cap = new RegExp(/^(?=.*[A-Z]).+$/);\n    var min_num = new RegExp(/^(?=.*\\d).+$/); \n    var min_length = 8;\n    var score = 0;\n    \n    if(password.length >= min_length) { score = score + 1; }\n    if(min_small.test(password)) { score = score + 1;}\n    if(min_cap.test(password)) { score = score + 1;}\n    if(min_num.test(password)) { score = score+ 1; }\n    $('#meter').val(score);   \n}\n\nApp.Listeners.MAIL_ACC.keypress_v_password = function() {\n    var ref = $('input[name=\"v_password\"]');\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.MAIL_ACC.update_v_password(elm, $(elm).val());\n        }, 100);\n    });\n}\n\nApp.Listeners.MAIL_ACC.keypress_v_password();\n\n\nrandomString = function(min_length = 16) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = min_length;\n    var randomstring = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        randomstring += chars.substr(rnum, 1);\n    }\n    var regex = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\\d)[a-zA-Z\\d]{8,}$/);\n    if(!regex.test(randomstring)){\n        randomString();\n    }else{\n        $('input[name=v_password]').val(randomstring);\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text(randomstring);\n        else\n            $('#v_password').text(Array(randomstring.length+1).join('*'));\n        \n        App.Actions.MAIL_ACC.update_v_password();\n        generate_mail_credentials();\n    }    \n}\n\ngenerate_mail_credentials = function() {\n    var div = $('.mail-infoblock').clone();\n    div.find('#mail_configuration').remove();\n    var pass=div.find('#v_password').text();\n    if (pass==\"\") div.find('#v_password').text(' ');\n    var output = div.text();\n    output=output.replace(/(?:\\r\\n|\\r|\\n|\\t)/g, \"|\");\n    output=output.replace(/  /g, \"\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/^\\|+/g, \"\");\n    output=output.replace(/\\|$/, \"\");\n    output=output.replace(/ $/, \"\");\n    output=output.replace(/:\\|/g, \": \");\n    output=output.replace(/\\|/g, \"\\n\");\n    //console.log(output);\n    $('#v_credentials').val(output);\n}\n\n$(document).ready(function() {\n    $('#v_account').text($('input[name=v_account]').val());\n    $('#v_password').text($('input[name=v_password]').val());\n    generate_mail_credentials();\n\n    $('input[name=v_account]').change(function(){\n        $('#v_account').text($(this).val());\n        generate_mail_credentials();\n    });\n\n    $('input[name=v_password]').change(function(){\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text($(this).val());\n        else\n            $('#v_password').text(Array($(this).val().length+1).join('*'));\n        generate_mail_credentials();\n    });\n\n    $('.toggle-psw-visibility-icon').click(function(){\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text($('input[name=v_password]').val());\n        else\n            $('#v_password').text(Array($('input[name=v_password]').val().length+1).join('*'));\n        generate_mail_credentials();\n    });\n\n    $('#mail_configuration').change(function(evt){\n        var opt = $(evt.target).find('option:selected');\n\n        switch(opt.attr('v_type')){\n            case 'hostname':\n                $('#td_imap_hostname').text(opt.attr('domain'));\n                $('#td_smtp_hostname').text(opt.attr('domain'));\n                break;\n            case 'starttls':\n                $('#td_imap_port').text('143');\n                $('#td_imap_encryption').text('STARTTLS');\n                $('#td_smtp_port').text('587');\n                $('#td_smtp_encryption').text('STARTTLS');\n                break;\n            case 'ssl':\n                $('#td_imap_port').text('993');\n                $('#td_imap_encryption').text('SSL / TLS');\n                $('#td_smtp_port').text('465');\n                $('#td_smtp_encryption').text('SSL / TLS');\n                break;\n            case 'no_encryption':\n                $('#td_imap_hostname').text(opt.attr('domain'));\n                $('#td_smtp_hostname').text(opt.attr('domain'));\n\n                $('#td_imap_port').text('143');\n                $('#td_imap_encryption').text(opt.attr('no_encryption'));\n                $('#td_smtp_port').text('25');\n                $('#td_smtp_encryption').text(opt.attr('no_encryption'));\n                break;\n        }\n        generate_mail_credentials();\n    });\n});\n", " App.Actions.WEB.update_custom_doc_root = function(elm, hint) {\n    var prepath = $('input[name=\"v-custom-doc-root_prepath\"]').val();\n    var domain = $('select[name=\"v-custom-doc-domain\"]').val();\n    var folder = $('input[name=\"v-custom-doc-folder\"]').val();\n    console.log(domain, folder);\n    $('.custom_docroot_hint').text(prepath+domain+'/public_html/'+folder);\n}\nApp.Listeners.DB.keypress_custom_folder = function() {\n    var ref = $('input[name=\"v-custom-doc-folder\"]');\n    var current_rec = ref.val();\n    App.Actions.WEB.update_custom_doc_root(ref, current_rec);\n    \n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.WEB.update_custom_doc_root(elm, $(elm).val());\n        });\n    });\n}\n\nApp.Listeners.DB.change_custom_doc = function() {\n    var ref = $('select[name=\"v-custom-doc-domain\"]');\n    var current_rec = ref.val();\n    ref.bind('change select', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.WEB.update_custom_doc_root(elm, $(elm).val());\n            var domain = $('.ftp-path-prefix').text(GLOBAL.FTP_USER_PREPATH + '/' + $(evt.target));\n\n        });\n    });\n}\n\n// Page entry point\n// Trigger listeners\nApp.Listeners.DB.keypress_custom_folder();\nApp.Listeners.DB.change_custom_doc();\n\nApp.Actions.WEB.update_ftp_username_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').text('');\n    }\n    \n    hint = hint.replace(/[^\\w\\d]/gi, '');\n\n    $(elm).parent().find('.v-ftp-user').val(hint);\n    $(elm).parent().find('.hint').text(GLOBAL.FTP_USER_PREFIX + hint);\n}\n\nApp.Listeners.WEB.keypress_ftp_username = function() {\n    var ftp_user_inputs = $('.v-ftp-user');\n    $.each(ftp_user_inputs, function(i, ref) {\n        var ref = $(ref);\n        var current_val = ref.val();\n        if (current_val.trim() != '') {\n            App.Actions.WEB.update_ftp_username_hint(ref, current_val);\n        }\n        \n        ref.bind('keypress input', function(evt) {\n            clearTimeout(window.frp_usr_tmt);\n            window.frp_usr_tmt = setTimeout(function() {\n                var elm = $(evt.target);\n                App.Actions.WEB.update_ftp_username_hint(elm, $(elm).val());\n            }, 100);\n        });\n    });\n}\n\nApp.Listeners.WEB.keypress_domain_name = function() {\n    $('#v_domain').bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            //var elm = $(evt.target);\n            //App.Actions.WEB.update_ftp_username_hint(elm, $(elm).val());\n            var domain = $('.ftp-path-prefix').text(GLOBAL.FTP_USER_PREPATH + '/' + $('#v_domain').val());\n            $('#v-custom-doc-domain-main').text($('#v_domain').val());\n            $('#v-custom-doc-domain-main').val($('#v_domain').val());\n            App.Actions.WEB.update_custom_doc_root(13, 12);\n            \n        }, 100);\n    });\n}\n\n//\n//\n\nApp.Actions.WEB.update_ftp_path_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.v-ftp-path-hint').text('');\n    }\n\n    if (hint[0] != '/') {\n        hint = '/' + hint;\n    }\n    hint = hint.replace(/\\/(\\/+)/g, '/');\n\n    $(elm).parent().find('.v-ftp-path-hint').text(hint);\n}\n\nApp.Listeners.WEB.keypress_ftp_path = function() {\n    var ftp_path_inputs = $('.v-ftp-path');\n    $.each(ftp_path_inputs, function(i, ref) {\n        var ref = $(ref);\n        var current_val = ref.val();\n        if (current_val.trim() != '') {\n            App.Actions.WEB.update_ftp_path_hint(ref, current_val);\n        }\n        \n        ref.bind('keypress input', function(evt) {\n            clearTimeout(window.frp_usr_tmt);\n            window.frp_usr_tmt = setTimeout(function() {\n                var elm = $(evt.target);\n                App.Actions.WEB.update_ftp_path_hint(elm, $(elm).val());\n            }, 100);\n        });\n    });\n}\n\n//\n//\nApp.Actions.WEB.add_ftp_user_form = function() {\n    var ref = $('#templates').find('.ftptable-nrm').clone(true);\n    var index = $('.data-col2 .ftptable').length + 1;\n    \n    ref.find('input').each(function(i, elm) {\n        var attr_value = $(elm).prop('name').replace('%INDEX%', index);\n        $(elm).prop('name', attr_value);\n    });\n    \n    ref.find('.ftp-user-number').text(index);\n    \n    $('#ftp_users').append(ref);\n    \n    var index = 1;\n    $('.data-col2 .ftp-user-number:visible').each(function(i, o) {\n        $(o).text(index);\n        index += 1;\n    });\n}\n\nApp.Actions.WEB.remove_ftp_user = function(elm) {\n    var ref = $(elm).parents('.ftptable');\n    ref.remove();\n\n    var index = 1;\n    $('.data-col2 .ftp-user-number:visible').each(function(i, o) {\n        $(o).text(index);\n        index += 1;\n    });\n\n    if ($('.ftptable-nrm:visible').length == 0) {\n        $('.v-add-new-user').hide();\n        $('input[name=\"v_ftp\"]').attr('checked', false);\n    }\n}\n\n\nApp.Actions.WEB.toggle_additional_ftp_accounts = function(elm) {\n    if ($(elm).prop('checked')) {\n        $('.ftptable-nrm, .v-add-new-user, .add-new-ftp-user-button').show();\n        $('.ftptable-nrm').each(function(i, elm) {\n            var login = $(elm).find('.v-ftp-user');\n            if (login.val().trim() != '') {\n                $(elm).find('.v-ftp-user-deleted').val(0);\n            }\n        });\n    }\n    else {\n        $('.ftptable-nrm, .v-add-new-user, .add-new-ftp-user-button').hide();\n        $('.ftptable-nrm').each(function(i, elm) {\n            var login = $(elm).find('.v-ftp-user');\n            if (login.val().trim() != '') {\n                $(elm).find('.v-ftp-user-deleted').val(1);\n            }\n        });\n    }\n    \n    if ($('.ftptable-nrm:visible').length == 0) {\n        var ref = $('#templates').find('.ftptable').clone(true);\n        var index = $('.data-col2 .ftptable').length + 1;\n        \n        ref.find('input').each(function(i, elm) {\n            var attr_value = $(elm).prop('name').replace('%INDEX%', index);\n            $(elm).prop('name', attr_value);\n        });\n        \n        ref.find('.ftp-user-number').text(index);\n        \n        $('.v-add-new-user').parent('tr').prev().find('td').html(ref);\n    }\n}\n\nApp.Actions.WEB.toggle_letsencrypt = function(elm) {\n    if ($(elm).prop('checked')) {\n        $('#ssltable textarea[name=v_ssl_crt],#ssltable textarea[name=v_ssl_key], #ssltable textarea[name=v_ssl_ca]').attr('disabled', 'disabled');\n        $('#generate-csr').hide();\n\t$('.lets-encrypt-note').show();\n    }\n    else {\n        $('#ssltable textarea[name=v_ssl_crt],#ssltable textarea[name=v_ssl_key], #ssltable textarea[name=v_ssl_ca]').removeAttr('disabled');\n        $('#generate-csr').show();\n\t$('.lets-encrypt-note').hide();\n    }\n}\n\n//\n// Page entry point\nApp.Listeners.WEB.keypress_ftp_username();\nApp.Listeners.WEB.keypress_ftp_path();\nApp.Listeners.WEB.keypress_domain_name();\n\n\n$(function() {\n    $('#v_domain').change(function() {\n        var prefix = 'www.';\n        if (((document.getElementById('v_domain').value).split(\".\")).length > 2) {\n            document.getElementById('v_aliases').value = \"\";\n        } else {\n            document.getElementById('v_aliases').value = prefix + document.getElementById('v_domain').value;\n        }\n    });\n    App.Actions.WEB.toggle_letsencrypt($('input[name=v_letsencrypt]'))\n\n    $('select[name=\"v_stats\"]').change(function(evt){\n        var select = $(evt.target);\n    \n        if(select.val() == 'none'){\n            $('.stats-auth').hide();\n        } else {\n            $('.stats-auth').show();\n        }\n    });\n});\n\n\n\nfunction WEBrandom() {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = 16;\n    var webrandom = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        webrandom += chars.substr(rnum, 1);\n    }\n        document.v_add_web.v_stats_password.value = webrandom;\n}\n\nfunction FTPrandom(elm) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = 16;\n    var ftprandomstring = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        ftprandomstring += chars.substr(rnum, 1);\n    }\n    $(elm).parents('.ftptable').find('.v-ftp-user-psw').val(ftprandomstring);\n}\n\n$('#vstobjects').on('submit', function(evt) {\n    $('input[disabled]').each(function(i, elm) {\n        $(elm).removeAttr('disabled');\n    });\n});\n", "//\n//\n// Updates database username dynamically, showing its prefix\nApp.Actions.DB.update_db_username_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').text('');\n    } \n    $(elm).parent().find('.hint').text(GLOBAL.DB_USER_PREFIX + hint);\n}\n\n//\n//\n// Updates database name dynamically, showing its prefix\nApp.Actions.DB.update_db_databasename_hint = function(elm, hint) {\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').text('');\n    } \n    $(elm).parent().find('.hint').text(GLOBAL.DB_DBNAME_PREFIX + hint);\n}\n\n//\n// listener that triggers database user hint updating\nApp.Listeners.DB.keypress_db_username = function() {\n    var ref = $('input[name=\"v_dbuser\"]');\n    var current_val = ref.val();\n    if (current_val.trim() != '') {\n        App.Actions.DB.update_db_username_hint(ref, current_val);\n    }    \n    \n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_db_username_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\n//\n// listener that triggers database name hint updating\nApp.Listeners.DB.keypress_db_databasename = function() {\n    var ref = $('input[name=\"v_database\"]');\n    var current_val = ref.val();\n    if (current_val.indexOf(GLOBAL.DB_DBNAME_PREFIX) == 0) {\n        current_val = current_val.slice(GLOBAL.DB_DBNAME_PREFIX.length, current_val.length);\n        ref.val(current_val);\n    }\n    if (current_val.trim() != '') {\n        App.Actions.DB.update_db_username_hint(ref, current_val);\n    }   \n    \n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_dbn_tmt);\n        window.frp_dbn_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_db_databasename_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\nApp.Actions.DB.update_v_password = function (){\n    var password = $('input[name=\"v_password\"]').val();\n    var min_small = new RegExp(/^(?=.*[a-z]).+$/);\n    var min_cap = new RegExp(/^(?=.*[A-Z]).+$/);\n    var min_num = new RegExp(/^(?=.*\\d).+$/); \n    var min_length = 8;\n    var score = 0;\n    \n    if(password.length >= min_length) { score = score + 1; }\n    if(min_small.test(password)) { score = score + 1;}\n    if(min_cap.test(password)) { score = score + 1;}\n    if(min_num.test(password)) { score = score+ 1; }\n    $('#meter').val(score);   \n}\n\nApp.Listeners.DB.keypress_v_password = function() {\n    var ref = $('input[name=\"v_password\"]');\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_v_password(elm, $(elm).val());\n        }, 100);\n    });\n}\n\nApp.Listeners.DB.keypress_v_password();\n\n//\n// Page entry point\n// Trigger listeners\nApp.Listeners.DB.keypress_db_username();\nApp.Listeners.DB.keypress_db_databasename();\n\n\nrandomString = function(min_length = 16) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = min_length;\n    var randomstring = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        randomstring += chars.substr(rnum, 1);\n    }\n    var regex = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\\d)[a-zA-Z\\d]{8,}$/);\n    if(!regex.test(randomstring)){\n        randomString();\n    }else{\n        $('input[name=v_password]').val(randomstring);\n        App.Actions.DB.update_v_password();\n    }    \n}\n\n     ", "//\n//\n// Updates database dns record dynamically, showing its full domain path\nApp.Actions.DB.update_dns_record_hint = function(elm, hint) {\n    // clean hint\n    if (hint.trim() == '') {\n        $(elm).parent().find('.hint').text('');\n    }\n\n    // set domain name without rec in case of @ entries\n    if (hint == '@') {\n        hint = '';\n    }\n\n    // dont show pregix if domain name = rec value\n    if (hint == GLOBAL.DNS_REC_PREFIX + '.') {\n        hint = '';\n    }\n\n    // add dot at the end if needed\n    if (hint != '' && hint.slice(-1) != '.') {\n        hint += '.';\n    }\n\n    $(elm).parent().find('.hint').text(hint + GLOBAL.DNS_REC_PREFIX);\n}\n\n//\n// listener that triggers dns record name hint updating\nApp.Listeners.DB.keypress_dns_rec_entry = function() {\n    var ref = $('input[name=\"v_rec\"]');\n    var current_rec = ref.val();\n    if (current_rec.trim() != '') {\n        App.Actions.DB.update_dns_record_hint(ref, current_rec);\n    }\n\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.DB.update_dns_record_hint(elm, $(elm).val());\n        }, 100);\n    });\n}\n\n//\n// Page entry point\n// Trigger listeners\nApp.Listeners.DB.keypress_dns_rec_entry();\n", "App.Actions.MAIL_ACC.enable_unlimited = function(elm, source_elm) {\n    $(elm).data('checked', true);\n    $(elm).data('prev_value', $(elm).val()); // save prev value in order to restore if needed\n    $(elm).val(App.Constants.UNLIM_TRANSLATED_VALUE);\n    $(elm).attr('disabled', true);\n    $(source_elm).css('opacity', '1');\n}\n\nApp.Actions.MAIL_ACC.disable_unlimited = function(elm, source_elm) {\n    $(elm).data('checked', false);\n    if ($(elm).data('prev_value') && $(elm).data('prev_value').trim() != '') {\n        var prev_value = $(elm).data('prev_value').trim();\n        $(elm).val(prev_value);\n        if (App.Helpers.isUnlimitedValue(prev_value)) {\n            $(elm).val('0');\n        }\n    }\n    else {\n        if (App.Helpers.isUnlimitedValue($(elm).val())) {\n            $(elm).val('0');\n        }\n    }\n    $(elm).attr('disabled', false);\n    $(source_elm).css('opacity', '0.5');\n}\n\n// \nApp.Actions.MAIL_ACC.toggle_unlimited_feature = function(evt) {\n    var elm = $(evt.target);\n    var ref = elm.prev('.vst-input');\n    if (!$(ref).data('checked')) {\n        App.Actions.MAIL_ACC.enable_unlimited(ref, elm);\n    }\n    else {\n        App.Actions.MAIL_ACC.disable_unlimited(ref, elm);\n    }\n}\n\nApp.Listeners.MAIL_ACC.checkbox_unlimited_feature = function() {\n    $('.unlim-trigger').on('click', App.Actions.MAIL_ACC.toggle_unlimited_feature);\n}\n\nApp.Listeners.MAIL_ACC.init = function() {\n    $('.unlim-trigger').each(function(i, elm) {\n        var ref = $(elm).prev('.vst-input');\n        if (App.Helpers.isUnlimitedValue($(ref).val())) {\n            App.Actions.MAIL_ACC.enable_unlimited(ref, elm);\n        }\n        else {\n            $(ref).data('prev_value', $(ref).val());\n            App.Actions.MAIL_ACC.disable_unlimited(ref, elm);\n        }\n    });\n}\n\nApp.Actions.MAIL_ACC.update_v_password = function (){\n    var password = $('input[name=\"v_password\"]').val();\n    var min_small = new RegExp(/^(?=.*[a-z]).+$/);\n    var min_cap = new RegExp(/^(?=.*[A-Z]).+$/);\n    var min_num = new RegExp(/^(?=.*\\d).+$/); \n    var min_length = 8;\n    var score = 0;\n    \n    if(password.length >= min_length) { score = score + 1; }\n    if(min_small.test(password)) { score = score + 1;}\n    if(min_cap.test(password)) { score = score + 1;}\n    if(min_num.test(password)) { score = score+ 1; }\n    $('#meter').val(score);   \n}\n\nApp.Listeners.MAIL_ACC.keypress_v_password = function() {\n    var ref = $('input[name=\"v_password\"]');\n    ref.bind('keypress input', function(evt) {\n        clearTimeout(window.frp_usr_tmt);\n        window.frp_usr_tmt = setTimeout(function() {\n            var elm = $(evt.target);\n            App.Actions.MAIL_ACC.update_v_password(elm, $(elm).val());\n        }, 100);\n    });\n}\n\n$('#v_blackhole').on('click', function(evt){\n       if($('#v_blackhole').is(':checked')){\n           $('#v_fwd').prop('disabled', true);\n           $('#v_fwd_for').prop('checked', true);\n           $('#id_fwd_for').hide();\n       }else{\n           $('#v_fwd').prop('disabled', false);\n           $('#id_fwd_for').show();       \n       }\n    });\n\nApp.Listeners.MAIL_ACC.keypress_v_password();\n\n\nrandomString = function(min_length = 16) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';\n    var string_length = min_length;\n    var randomstring = '';\n    for (var i = 0; i < string_length; i++) {\n        var rnum = Math.floor(Math.random() * chars.length);\n        randomstring += chars.substr(rnum, 1);\n    }\n    var regex = new RegExp(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*\\d)[a-zA-Z\\d]{8,}$/);\n    if(!regex.test(randomstring)){\n        randomString();\n    }else{\n        $('input[name=v_password]').val(randomstring);\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text(randomstring);\n        else\n            $('#v_password').text(Array(randomstring.length+1).join('*'));\n        \n        App.Actions.MAIL_ACC.update_v_password();\n        generate_mail_credentials();\n    }    \n}\ngenerate_mail_credentials = function() {\n    var div = $('.mail-infoblock').clone();\n    div.find('#mail_configuration').remove();\n    var pass=div.find('#v_password').text();\n    if (pass==\"\") div.find('#v_password').text(' ');\n    var output = div.text();\n    output=output.replace(/(?:\\r\\n|\\r|\\n|\\t)/g, \"|\");\n    output=output.replace(/  /g, \"\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/\\|\\|/g, \"|\");\n    output=output.replace(/^\\|+/g, \"\");\n    output=output.replace(/\\|$/, \"\");\n    output=output.replace(/ $/, \"\");\n    output=output.replace(/:\\|/g, \": \");\n    output=output.replace(/\\|/g, \"\\n\");\n    //console.log(output);\n    $('#v_credentials').val(output);\n}\n\n$(document).ready(function() {\n    $('#v_account').text($('input[name=v_account]').val());\n    $('#v_password').text($('input[name=v_password]').val());\n    generate_mail_credentials();\n\n    $('input[name=v_account]').change(function(){\n        $('#v_account').text($(this).val());\n        generate_mail_credentials();\n    });\n  \n    $('input[name=v_password]').change(function(){\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text($(this).val());\n        else\n            $('#v_password').text(Array($(this).val().length+1).join('*'));\n        generate_mail_credentials();\n    });\n\n    $('.toggle-psw-visibility-icon').click(function(){\n        if($('input[name=v_password]').attr('type') == 'text')\n            $('#v_password').text($('input[name=v_password]').val());\n        else\n            $('#v_password').text(Array($('input[name=v_password]').val().length+1).join('*'));\n        generate_mail_credentials();\n    });\n\n    $('#mail_configuration').change(function(evt){\n        var opt = $(evt.target).find('option:selected');\n\n        switch(opt.attr('v_type')){\n            case 'hostname':\n                $('#td_imap_hostname').text(opt.attr('domain'));\n                $('#td_smtp_hostname').text(opt.attr('domain'));\n                break;\n            case 'starttls':\n                $('#td_imap_port').text('143');\n                $('#td_imap_encryption').text('STARTTLS');\n                $('#td_smtp_port').text('587');\n                $('#td_smtp_encryption').text('STARTTLS');\n                break;\n            case 'ssl':\n                $('#td_imap_port').text('993');\n                $('#td_imap_encryption').text('SSL / TLS');\n                $('#td_smtp_port').text('465');\n                $('#td_smtp_encryption').text('SSL / TLS');\n                break;\n            case 'no_encryption':\n                $('#td_imap_hostname').text(opt.attr('domain'));\n                $('#td_smtp_hostname').text(opt.attr('domain'));\n\n                $('#td_imap_port').text('143');\n                $('#td_imap_encryption').text(opt.attr('no_encryption'));\n                $('#td_smtp_port').text('25');\n                $('#td_smtp_encryption').text(opt.attr('no_encryption'));\n                break;\n        }\n        generate_mail_credentials();\n    });\n});\n", "<!-- Begin toolbar -->\n<div class=\"l-center edit\">\n\t<div class=\"l-sort clearfix\">\n\t\t<div class=\"l-unit-toolbar__buttonstrip\">\n\t\t\t<a class=\"ui-button cancel\" dir=\"ltr\" id=\"btn-back\" href=\"/list/db/\"><i class=\"fas fa-arrow-left status-icon blue\"></i><?=_('Back');?></a>\n\t\t</div>\n\t\t<div class=\"l-unit-toolbar__buttonstrip float-right\">\n\t\t\t<a href=\"#\" class=\"ui-button\" data-action=\"submit\" data-id=\"vstobjects\"><i class=\"fas fa-save status-icon purple\"></i><?=_('Save');?></a>\n\t\t</div>\n\t</div>\n</div>\n<!-- End toolbar -->\n\n<div class=\"l-separator\"></div>\n\n<div class=\"l-center animated fadeIn\">\n\n\t<form id=\"vstobjects\" name=\"v_add_db\" method=\"post\">\n\t\t<input type=\"hidden\" name=\"token\" value=\"<?=$_SESSION['token']?>\" />\n\t\t<input type=\"hidden\" name=\"ok\" value=\"Add\" />\n\n\t\t<table class=\"data mode-add\">\n\t\t\t<tr class=\"data-add\">\n\t\t\t\t<td class=\"data-dotted\">\n\t\t\t\t\t<table class=\"data-col1\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"data-dotted\">\n\t\t\t\t\t<table class=\"data-col2\" width=\"600px\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"step-top\">\n\t\t\t\t\t\t\t\t<span class=\"page-title\"><?=_('Adding database');?></span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<?php show_error_panel($_SESSION);?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<?php if (($user == 'admin') && (($_GET['accept'] !== \"true\")))  {?>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"step-top\">\n\t\t\t\t\t\t\t\t\t<span class=\"alert alert-danger alert-with-icon\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"fas fa-exclamation\"></i>\n\t\t\t\t\t\t\t\t\t\t<?=_('Avoid adding web domains on admin account');?>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t<?php if (($user == 'admin') && (empty($_GET['accept']))) {?>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"step-top\">\n\t\t\t\t\t\t\t\t\t<span><a href=\"/add/user/\" class=\"vst-advanced admin-warning-button\"><?=_('Add User');?></a></span>\n\t\t\t\t\t\t\t\t\t<span><a href=\"/add/db/?accept=true\" class=\"vst-advanced button danger admin-warning-button\"><?=_('Continue');?></a> </span>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<?php } ?>\n\t\t\t\t\t\t<?php if (($user == 'admin') && (($_GET['accept'] === \"true\")) || ($user !== \"admin\"))  {?>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"hint\">\n\t\t\t\t\t\t\t\t\t<?=sprintf(_('Prefix %s will be automatically added to database name and database user'),'<b>'.$user_plain.'_</b>'); ?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text step-top input-label\">\n\t\t\t\t\t\t\t\t\t<?=_('Database');?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_database\" value=\"<?=htmlentities(trim($v_database, \"'\"))?>\">\n\t\t\t\t\t\t\t\t\t<small class=\"hint\"></small>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t<?=_('Type');?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<select class=\"vst-list\" name=\"v_type\">\n\t\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t\t\tforeach ($db_types as $key => $value) {\n\t\t\t\t\t\t\t\t\t\t\t\techo \"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"\".htmlentities($value).\"\\\"\";\n\t\t\t\t\t\t\t\t\t\t\t\tif ((!empty($v_type)) && ( $value == $v_type )) echo ' selected';\n\t\t\t\t\t\t\t\t\t\t\t\techo \">\".htmlentities($value).\"</option>\";\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t\tprint _('Username');\n\t\t\t\t\t\t\t\t\t\techo \"&nbsp;&nbsp;&nbsp;&nbsp;<em><small>(\".sprintf(_('maximum characters length, including prefix'), 32).\")</small></em>\";\n\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_dbuser\" value=\"<?=htmlentities(trim($v_dbuser, \"'\"))?>\">\n\t\t\t\t\t\t\t\t\t<small class=\"hint\"></small>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t<?=_('Password');?> <a href=\"javascript:randomString();\" title=\"<?=_('generate');?>\"><i class=\"fas fa-sync status-icon green icon-large\"></i></a>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input password\" name=\"v_password\"><br />\n\t\t\t\t\t\t\t\t\t<meter max=\"4\" id=\"meter\"></meter>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text\">\n\t\t\t\t\t\t\t\t\t<?=_('Your password must have at least');?>:\n\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t<li><?=_('8 characters long');?></li>\n\t\t\t\t\t\t\t\t\t\t<li><?=_('1 uppercase & 1 lowercase character');?></li>\n\t\t\t\t\t\t\t\t\t\t<li><?=_('1 number');?></li>\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t<?=_('Send login credentials to email address') ?>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"vst-input\" name=\"v_db_email\" value=\"<?=htmlentities(trim($v_db_email, \"'\"))?>\">\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"step-top vst-text\" style=\"/*padding: 32px 0 20px 0;*/\">\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:elementHideShow('advanced-opts');\" class=\"vst-advanced\"><?=_('Advanced options');?></a>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"step-top\">\n\t\t\t\t\t\t\t\t\t<table id=\"advanced-opts\" style=\"display: none;\">\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?=_('Host');?>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"vst-list\" name=\"v_host\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tforeach ($db_hosts as $value) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\techo \"\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t<option value=\\\"\".htmlentities($value).\"\\\"\";\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ((!empty($v_host)) && ( $value == $v_host )) echo ' selected';\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\techo \">\".htmlentities($value).\"</option>\";\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t\t\t\t\t<?=_('Charset');?>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t\t\t<select class=\"vst-list\" name=\"v_charset\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=big5 <?php if ((!empty($v_charset)) && ( $v_charset == 'big5')) echo 'selected';?>>big5</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=dec8 <?php if ((!empty($v_charset)) && ( $v_charset == 'dec8')) echo 'selected';?>>dec8</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp850 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp850')) echo 'selected';?>>cp850</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=hp8 <?php if ((!empty($v_charset)) && ( $v_charset == 'hp8')) echo 'selected';?>>hp8</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=koi8r <?php if ((!empty($v_charset)) && ( $v_charset == 'koi8r')) echo 'selected';?>>koi8r</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=latin1 <?php if ((!empty($v_charset)) && ( $v_charset == 'latin1')) echo 'selected';?>>latin1</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=latin2 <?php if ((!empty($v_charset)) && ( $v_charset == 'latin2')) echo 'selected';?>>latin2</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=swe7 <?php if ((!empty($v_charset)) && ( $v_charset == 'swe7')) echo 'selected';?>>swe7</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=ascii <?php if ((!empty($v_charset)) && ( $v_charset == 'ascii')) echo 'selected';?>>ascii</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=ujis <?php if ((!empty($v_charset)) && ( $v_charset == 'ujis')) echo 'selected';?>>ujis</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=sjis <?php if ((!empty($v_charset)) && ( $v_charset == 'sjis')) echo 'selected';?>>sjis</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=hebrew <?php if ((!empty($v_charset)) && ( $v_charset == 'hebrew')) echo 'selected';?>>hebrew</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=tis620 <?php if ((!empty($v_charset)) && ( $v_charset == 'tis620')) echo 'selected';?>>tis620</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=euckr <?php if ((!empty($v_charset)) && ( $v_charset == 'euckr')) echo 'selected';?>>euckr</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=koi8u <?php if ((!empty($v_charset)) && ( $v_charset == 'koi8u')) echo 'selected';?>>koi8u</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=gb2312 <?php if ((!empty($v_charset)) && ( $v_charset == 'gb2312')) echo 'selected';?>>gb2312</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=greek <?php if ((!empty($v_charset)) && ( $v_charset == 'greek')) echo 'selected';?>>greek</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp1250 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp1250')) echo 'selected';?>>cp1250</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=gbk <?php if ((!empty($v_charset)) && ( $v_charset == 'gbk')) echo 'selected';?>>gbk</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=latin5 <?php if ((!empty($v_charset)) && ( $v_charset == 'latin5')) echo 'selected';?>>latin5</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=armscii8 <?php if ((!empty($v_charset)) && ( $v_charset == 'armscii8')) echo 'selected';?>>armscii8</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=utf8 <?php if ((!empty($v_charset)) && ( $v_charset == 'utf8')) echo 'selected';?> <?php if (empty($v_charset)) echo 'selected';?>>utf8</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=utf8mb4 <?php if ((!empty($v_charset)) && ( $v_charset == 'utf8mb4')) echo 'selected';?>>utf8mb4</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=ucs2 <?php if ((!empty($v_charset)) && ( $v_charset == 'ucs2')) echo 'selected';?>>ucs2</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp866 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp866')) echo 'selected';?>>cp866</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=keybcs2 <?php if ((!empty($v_charset)) && ( $v_charset == 'keybcs2')) echo 'selected';?>>keybcs2</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=macce <?php if ((!empty($v_charset)) && ( $v_charset == 'macce')) echo 'selected';?>>macce</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=macroman <?php if ((!empty($v_charset)) && ( $v_charset == 'macroman')) echo 'selected';?>>macroman</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp852 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp852')) echo 'selected';?>>cp852</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=latin7 <?php if ((!empty($v_charset)) && ( $v_charset == 'latin7')) echo 'selected';?>>latin7</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp1251 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp1251')) echo 'selected';?>>cp1251</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp1256 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp1256')) echo 'selected';?>>cp1256</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp1257 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp1257')) echo 'selected';?>>cp1257</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=binary <?php if ((!empty($v_charset)) && ( $v_charset == 'binary')) echo 'selected';?>>binary</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=geostd8 <?php if ((!empty($v_charset)) && ( $v_charset == 'geostd8')) echo 'selected';?>>geostd8</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=cp932 <?php if ((!empty($v_charset)) && ( $v_charset == 'cp932')) echo 'selected';?>>cp932</option>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option value=eucjpms <?php if ((!empty($v_charset)) && ( $v_charset == 'eucjpms')) echo 'selected';?>>eucjpms</option>\n\t\t\t\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t\t<table class=\"data-col2\">\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t<?php } ?>\n\t\t</table>\n\t</form>\n</div>\n\n<script>\nGLOBAL.DB_USER_PREFIX = \"<?=$user_plain;?>_\";\nGLOBAL.DB_DBNAME_PREFIX = \"<?=$user_plain;?>_\";\n</script>", "<!-- Begin toolbar -->\n<div class=\"l-center edit\">\n\t<div class=\"l-sort clearfix\">\n\t\t<div class=\"l-unit-toolbar__buttonstrip\">\n\t\t\t<a class=\"ui-button cancel\" dir=\"ltr\" id=\"btn-back\" href=\"/list/db/\"><i class=\"fas fa-arrow-left status-icon blue\"></i><?=_('Back');?></a>\n\t\t</div>\n\t\t<div class=\"l-unit-toolbar__buttonstrip float-right\">\n\t\t\t<a href=\"#\" class=\"ui-button\" data-action=\"submit\" data-id=\"vstobjects\"><i class=\"fas fa-save status-icon purple\"></i><?=_('Save');?></a>\n\t\t</div>\n\t</div>\n</div>\n<!-- End toolbar -->\n\n<div class=\"l-separator\"></div>\n\n<div class=\"l-center animated fadeIn\">\n\n\t<form id=\"vstobjects\" name=\"v_edit_db\" method=\"post\" class=\"<?=$v_status?>\">\n\t\t<input type=\"hidden\" name=\"token\" value=\"<?=$_SESSION['token']?>\" />\n\t\t<input type=\"hidden\" name=\"save\" value=\"save\" />\n\n\t\t<table class='data'>\n\t\t\t<tr class=\"data-add\">\n\t\t\t\t<td class=\"data-dotted\">\n\t\t\t\t\t<table class=\"data-col1\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</td>\n\t\t\t\t<td class=\"data-dotted\">\n\t\t\t\t\t<table class=\"data-col2\" width=\"600px\">\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"step-top\">\n\t\t\t\t\t\t\t\t<span class=\"page-title\"><?=_('Editing Database');?></span>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<?php show_error_panel($_SESSION);?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text step-top\">\n\t\t\t\t\t\t\t\t<?=_('Database');?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_database\" value=\"<?=htmlentities(trim($v_database, \"'\"))?>\" disabled>\n\t\t\t\t\t\t\t\t<small class=\"hint\"></small>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t<?php\n\t\t\t\t\t\t\t\t\tprint _('Username');\n\t\t\t\t\t\t\t\t\techo \"&nbsp;&nbsp;&nbsp;&nbsp;<em><small>(\".sprintf(_('maximum characters length, including prefix'), 32).\")</small></em>\";\n\t\t\t\t\t\t\t\t?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_dbuser\" value=\"<?=htmlentities(trim($v_dbuser, \"'\"))?>\">\n\t\t\t\t\t\t\t\t<small class=\"hint\"></small>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t<?=_('Password');?> <a href=\"javascript:randomString();\" title=\"<?=_('generate');?>\"><i class=\"fas fa-sync status-icon green icon-large\"></i></a>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input password\" name=\"v_password\" value=\"<?=htmlentities(trim($v_password, \"'\"))?>\"><br />\n\t\t\t\t\t\t\t\t<meter max=\"4\" id=\"meter\"></meter>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text\">\n\t\t\t\t\t\t\t\t<?=_('Your password must have at least');?>:\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li><?=_('8 characters long');?></li>\n\t\t\t\t\t\t\t\t\t<li><?=_('1 uppercase & 1 lowercase character');?></li>\n\t\t\t\t\t\t\t\t\t<li><?=_('1 number');?></li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t<?=_('Type');?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_type\" value=\"<?=htmlentities(trim($v_type, \"'\"))?>\" disabled>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t<?=_('Host');?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_host\" value=\"<?=htmlentities(trim($v_host, \"'\"))?>\" disabled>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"vst-text input-label\">\n\t\t\t\t\t\t\t\t<?=_('Charset');?>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" size=\"20\" class=\"vst-input\" name=\"v_charset\" value=\"<?=htmlentities(trim($v_charset, \"'\"))?>\" disabled>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t\t<table class=\"data-col2\"></table>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</table>\n\t</form>\n</div>\n<?php if ($v_type == 'pgsql'){ $user=strtolower($user); } ?>\n<script>\n    GLOBAL.DB_USER_PREFIX = \"<?=$user_plain;?>_\";\n    GLOBAL.DB_DBNAME_PREFIX =  \"<?=$user_plain;?>_\";\n</script>"], "buggy_code_start_loc": [65, 6, 7, 144, 6, 6, 7, 122, 64, 129], "buggy_code_end_loc": [66, 17, 8, 214, 92, 17, 8, 192, 232, 131], "fixing_code_start_loc": [64, 6, 7, 144, 6, 6, 7, 122, 64, 129], "fixing_code_end_loc": [64, 17, 8, 214, 92, 17, 8, 192, 232, 131], "type": "CWE-79", "message": "Cross-site Scripting (XSS) - Reflected in GitHub repository hestiacp/hestiacp prior to 1.5.10.", "other": {"cve": {"id": "CVE-2022-0838", "sourceIdentifier": "security@huntr.dev", "published": "2022-03-04T08:15:07.407", "lastModified": "2022-03-10T15:07:30.923", "vulnStatus": "Analyzed", "descriptions": [{"lang": "en", "value": "Cross-site Scripting (XSS) - Reflected in GitHub repository hestiacp/hestiacp prior to 1.5.10."}, {"lang": "es", "value": "Una vulnerabilidad de tipo Cross-site Scripting (XSS) - Reflejado en el repositorio de GitHub hestiacp/hestiacp versiones anteriores a 1.5.10"}], "metrics": {"cvssMetricV31": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "3.1", "vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N", "attackVector": "NETWORK", "attackComplexity": "LOW", "privilegesRequired": "NONE", "userInteraction": "REQUIRED", "scope": "CHANGED", "confidentialityImpact": "LOW", "integrityImpact": "LOW", "availabilityImpact": "NONE", "baseScore": 6.1, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 2.8, "impactScore": 2.7}], "cvssMetricV30": [{"source": "security@huntr.dev", "type": "Secondary", "cvssData": {"version": "3.0", "vectorString": "CVSS:3.0/AV:N/AC:H/PR:H/UI:N/S:U/C:H/I:H/A:H", "attackVector": "NETWORK", "attackComplexity": "HIGH", "privilegesRequired": "HIGH", "userInteraction": "NONE", "scope": "UNCHANGED", "confidentialityImpact": "HIGH", "integrityImpact": "HIGH", "availabilityImpact": "HIGH", "baseScore": 6.6, "baseSeverity": "MEDIUM"}, "exploitabilityScore": 0.7, "impactScore": 5.9}], "cvssMetricV2": [{"source": "nvd@nist.gov", "type": "Primary", "cvssData": {"version": "2.0", "vectorString": "AV:N/AC:M/Au:N/C:N/I:P/A:N", "accessVector": "NETWORK", "accessComplexity": "MEDIUM", "authentication": "NONE", "confidentialityImpact": "NONE", "integrityImpact": "PARTIAL", "availabilityImpact": "NONE", "baseScore": 4.3}, "baseSeverity": "MEDIUM", "exploitabilityScore": 8.6, "impactScore": 2.9, "acInsufInfo": false, "obtainAllPrivilege": false, "obtainUserPrivilege": false, "obtainOtherPrivilege": false, "userInteractionRequired": true}]}, "weaknesses": [{"source": "nvd@nist.gov", "type": "Primary", "description": [{"lang": "en", "value": "CWE-79"}]}, {"source": "security@huntr.dev", "type": "Secondary", "description": [{"lang": "en", "value": "CWE-79"}]}], "configurations": [{"nodes": [{"operator": "OR", "negate": false, "cpeMatch": [{"vulnerable": true, "criteria": "cpe:2.3:a:hestiacp:control_panel:*:*:*:*:*:*:*:*", "versionEndExcluding": "1.5.10", "matchCriteriaId": "E3BC0A83-CD46-44C4-9B34-73FD22FC12A9"}]}]}], "references": [{"url": "https://github.com/hestiacp/hestiacp/commit/640f822d306ffb3eddf8ce2f46de75d7344283c1", "source": "security@huntr.dev", "tags": ["Patch", "Third Party Advisory"]}, {"url": "https://huntr.dev/bounties/bd2fb1f1-cc8b-4ef7-8e2b-4ca686d8d614", "source": "security@huntr.dev", "tags": ["Exploit", "Patch", "Third Party Advisory"]}]}, "github_commit_url": "https://github.com/hestiacp/hestiacp/commit/640f822d306ffb3eddf8ce2f46de75d7344283c1"}}